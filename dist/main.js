(()=>{"use strict";let e=[];function t(t){const o=n(t);u(e[o])}function n(t){return e.findIndex((e=>e.title===t))}let o=[];function c(){const e=d(o);-1!=e&&s(o[e].desc)}function d(e,t){const n=document.querySelector(".main-hd");return void 0===t?e.findIndex((e=>e.title===n.textContent)):e.findIndex((e=>e.title===t))}function l(e){document.querySelector(".main-hd-con").style.paddingBottom="1rem";const t=document.querySelector(".project-list");t.textContent="";for(let n=0;n<e.length;n++)t.appendChild(r(e[n]))}function r(e){const t=document.createElement("div");t.classList.add("new-project-con");const n=document.createElement("p");return n.classList.add("project-title"),n.textContent=e.title,t.appendChild(n),t.appendChild(function(){const e=document.createElement("div");e.classList.add("project-btn");const t=document.createElement("span");t.classList.add("material-icons-outlined"),t.classList.add("edit"),t.textContent="edit",e.appendChild(t);const n=document.createElement("span");return n.classList.add("material-icons-outlined"),n.classList.add("delete"),n.textContent="delete",e.appendChild(n),e}()),t}function s(e){const t=document.querySelector(".project-task-list");if(void 0===e)t.textContent="";else{t.textContent="";for(let n=0;n<e.length;n++)console.log(e[n]),t.appendChild(i(e[n]))}t.appendChild(a())}function i(e){const t=document.createElement("div");t.classList.add("project-task");const n=document.createElement("div");n.classList.add("project-task-left"),t.appendChild(n);const o=document.createElement("div");o.classList.add("checkbox"),n.appendChild(o);const c=document.createElement("p");return c.classList.add("project-task-desc"),c.textContent=e,n.appendChild(c),t.appendChild(function(){const e=document.createElement("div");e.classList.add("project-task-btn");const t=document.createElement("span");t.classList.add("material-icons-outlined"),t.classList.add("edit"),t.textContent="edit",e.appendChild(t);const n=document.createElement("span");return n.classList.add("material-icons-outlined"),n.classList.add("delete"),n.textContent="delete",e.appendChild(n),e}()),t}function a(){const e=document.createElement("button");e.classList.add("add-task");const t=document.createElement("span");return t.classList.add("material-icons-outlined"),t.classList.add("add-icon"),t.textContent="add",e.prepend(t,"Add Task"),e}function u(e){document.querySelector(".main-hd").textContent=e.title,document.querySelector(".main-hd-desc").textContent=e.desc,document.querySelector(".main-hd-date-user").textContent=e.dueDate;const t=document.querySelector(".main-hd-priority-user");var n;t.textContent=e.priority,t.style.color="Low"===(n=e.priority)?"green":"Medium"===n?"yellow":"red";const o=document.querySelector(".project-task-list");o.textContent="",o.appendChild(a())}document.querySelector(".add-project").addEventListener("click",(()=>{!function(){const t=document.querySelector(".project-form"),n=document.querySelector(".project-modal");n.showModal(),function(){const t=document.querySelector(".project-modal"),n=document.querySelector(".project-form");n.addEventListener("submit",(o=>{o.preventDefault();const c=document.getElementById("title"),d=document.getElementById("description"),r=document.getElementById("due-date");let s="Low";document.querySelector(".project-modal #medium").checked?s="Medium":document.querySelector(".project-modal #high").checked&&(s="High");const i=((e,t,n,o)=>({title:e,desc:t,dueDate:n,priority:o}))(c.value,d.value,r.value,s);e.push(i),l(e),u(i),t.close(),HTMLFormElement.prototype.reset.call(n)}),{once:!0})}(),document.querySelector(".project-close").addEventListener("click",(()=>{n.close(),HTMLFormElement.prototype.reset.call(t)}))}()})),document.querySelector(".project-list").addEventListener("click",(r=>{if("material-icons-outlined edit"===r.target.className)!function(t){const o=document.querySelector(".edit-form"),c=document.querySelector(".edit-modal");c.showModal(),function(t){const o=document.querySelector(".edit-modal"),c=document.querySelector(".edit-form");c.addEventListener("submit",(d=>{d.preventDefault();const r=document.getElementById("edit-title"),s=document.getElementById("edit-description"),i=document.getElementById("edit-due-date");let a="Low";document.querySelector(".edit-form #medium").checked?a="Medium":document.querySelector(".edit-form #high").checked&&(a="High");const m=n(t);e[m].title=r.value,e[m].desc=s.value,e[m].dueDate=i.value,e[m].priority=a,l(e),u(e[m]),o.close(),console.log(e),HTMLFormElement.prototype.reset.call(c)}),{once:!0})}(t),document.querySelector(".edit-close").addEventListener("click",(()=>{c.close(),HTMLFormElement.prototype.reset.call(o)}))}(r.target.parentElement.parentElement.childNodes[0].textContent);else if("material-icons-outlined delete"===r.target.className){const t=r.target.parentElement.parentElement.childNodes[0].textContent;(function(t){const o=n(t);e.splice(o,1),console.log(e),l(e),function(e){const t=document.querySelector(".main-hd-con"),n=document.querySelector(".main-hd"),o=document.querySelector(".main-hd-desc"),c=document.querySelector(".main-hd-date-user"),d=document.querySelector(".main-hd-priority-user");0===e.length?(n.textContent="",o.textContent="",c.textContent="",d.textContent="",t.style.paddingBottom="4.9rem"):(n.textContent=e[0].title,o.textContent=e[0].desc,c.textContent=e[0].dueDate,d.textContent=e[0].priority)}(e)})(t),function(e){const t=d(o,e);o.splice(t,1),s(o[t]),0!==o.length&&s(o[0].desc)}(t)}else if("project-title"===r.target.className){const e=r.target.className;r.target.parentElement.parentElement,t(e),c()}else{const e=r.target.childNodes[0].textContent;r.target.parentElement,t(e),c()}})),document.querySelector(".project-task-list").addEventListener("click",(e=>{if("add-task"===e.target.className)!function(){const e=document.querySelector(".task-form"),t=document.querySelector(".task-modal");t.showModal(),function(){const e=document.querySelector(".task-modal"),t=document.querySelector(".task-form");t.addEventListener("submit",(n=>{n.preventDefault();const c=document.querySelector(".main-hd"),l=document.getElementById("task-description");if(function(e){if(0===o.length)return!1;for(let t=0;t<o.length;t++)if(o[t].title===e)return!0;return!1}(c.textContent)){const e=d(o);o[e].desc.push(l.value)}else{const e=((e,t)=>({title:e,desc:t}))(c.textContent,[l.value]);o.push(e)}const r=d(o);s(o[r].desc),e.close(),HTMLFormElement.prototype.reset.call(t)}),{once:!0})}(),document.querySelector(".task-close").addEventListener("click",(()=>{t.close(),HTMLFormElement.prototype.reset.call(e)}))}();else if("material-icons-outlined edit"===e.target.className){const t=e.target.parentElement.parentElement.childNodes[0].textContent;!function(e,t){const n=document.querySelector(".edit-task-form"),c=document.querySelector(".edit-task-modal");c.showModal(),function(e,t){const n=document.querySelector(".edit-task-modal"),c=document.querySelector(".edit-task-form");c.addEventListener("submit",(l=>{l.preventDefault(),document.querySelector(".main-hd");const r=document.getElementById("edit-task-description"),i=d(o,e),a=function(e,t){return document.querySelector(".main-hd"),e.findIndex((e=>e===t))}(o[i].desc,t);console.log(a),o[i].desc[a]=r.value,s(o[i].desc),n.close(),HTMLFormElement.prototype.reset.call(c)}),{once:!0})}(e,t),document.querySelector(".edit-task-close").addEventListener("click",(()=>{c.close(),HTMLFormElement.prototype.reset.call(n)}))}(document.querySelector(".main-hd").textContent,t)}}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixFQUFZckMsRUFBRWlCLE9BQU9NLGNBQWNBLGNBQWNDLFdBQVcsR0FBRzlELGFEc0Y3RSxTQUE4QmYsRUFBYTBGLEdBQ3ZDLE1BQU14QyxFQUFPdEMsU0FBU0MsY0FBYyxtQkFDOUI4RSxFQUFnQi9FLFNBQVNDLGNBQWMsb0JBQzdDOEUsRUFBY3ZDLFlEcEdsQixTQUFzQnBELEVBQWMwRixHQUNoQyxNQUFNQyxFQUFnQi9FLFNBQVNDLGNBQWMsb0JBQ3ZDcUMsRUFBT3RDLFNBQVNDLGNBQWMsbUJBQ3BDcUMsRUFBS0QsaUJBQWlCLFVBQVdJLElBQzdCQSxFQUFFQyxpQkFDWTFDLFNBQVNDLGNBQWMsWUFBckMsTUFDTTJDLEVBQWM1QyxTQUFTMkMsZUFBZSx5QkFDdEN0RCxFQUFRRyxFQUFVRyxFQUFTUCxHQUMzQjRGLEVBNEJkLFNBQXVCakYsRUFBSytFLEdBRXhCLE9BRGM5RSxTQUFTQyxjQUFjLFlBQzlCRixFQUFJUCxXQUFVSCxHQUFTQSxJQUFVeUYsR0FDNUMsQ0EvQjBCRyxDQUFjdEYsRUFBUU4sR0FBT1MsS0FBTWdGLEdBQ3JEekQsUUFBUUMsSUFBSTBELEdBQ1pyRixFQUFRTixHQUFPUyxLQUFLa0YsR0FBYXBDLEVBQVlJLE1BQzdDbkQsRUFBWUYsRUFBUU4sR0FBT1MsTUFDM0JpRixFQUFjN0IsUUFDZEMsZ0JBQWdCQyxVQUFVQyxNQUFNQyxLQUFLaEIsRUFBSSxHQUMxQyxDQUFDaUIsTUFBTSxHQUNkLENDc0ZJMkIsQ0FBYTlGLEVBQWMwRixHQUVWOUUsU0FBU0MsY0FBYyxvQkFDL0JvQyxpQkFBaUIsU0FBUyxLQUMvQjBDLEVBQWM3QixRQUNkQyxnQkFBZ0JDLFVBQVVDLE1BQU1DLEtBQUtoQixFQUFLLEdBRWxELENDL0ZRNkMsQ0FEcUJuRixTQUFTQyxjQUFjLFlBQVlFLFlBQ3JCMkUsRUFDdkMsSSIsInNvdXJjZXMiOlsid2VicGFjazovL3RvLWRvLy4vc3JjL3Byb2plY3QuanMiLCJ3ZWJwYWNrOi8vdG8tZG8vLi9zcmMvdGFzay5qcyIsIndlYnBhY2s6Ly90by1kby8uL3NyYy9VSS5qcyIsIndlYnBhY2s6Ly90by1kby8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBpbXBvcnQgeyBhZGRUb1Byb2plY3RMaXN0LCBkaXNwbGF5UHJvamVjdCB9IGZyb20gXCIuL1VJXCI7XG4vLyBpbXBvcnQgeyB1cGRhdGVUYXNrIH0gZnJvbSBcIi4vdGFza1wiO1xuXG4vLyBsZXQgcHJvamVjdEFyciA9IFtdO1xuXG4vLyBmdW5jdGlvbiBwcm9qZWN0TW9kYWwoKSB7XG4vLyAgICAgY29uc3QgcHJvamVjdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LW1vZGFsXCIpO1xuLy8gICAgIHByb2plY3RNb2RhbC5zaG93TW9kYWwoKTtcbi8vICAgICBjb25zdCBjbG9zZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1jbG9zZVwiKTtcbi8vICAgICBjbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuLy8gICAgICAgICBwcm9qZWN0TW9kYWwuY2xvc2UoKTtcbi8vICAgICB9KTtcbi8vICAgICByZXR1cm4gcHJvamVjdE1vZGFsO1xuLy8gfVxuXG4vLyBmdW5jdGlvbiBwcm9qZWN0Rm9ybSgpIHtcbi8vICAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LWZvcm1cIik7XG4vLyAgICAgY29uc3QgcHJvamVjdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LW1vZGFsXCIpO1xuLy8gICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuLy8gICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4vLyAgICAgICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aXRsZVwiKTtcbi8vICAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlc2NyaXB0aW9uXCIpO1xuLy8gICAgICAgICBjb25zdCBkdWVEYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkdWUtZGF0ZVwiKTtcbi8vICAgICAgICAgbGV0IHByaW9yaXR5ID0gXCJMb3dcIjtcbi8vICAgICAgICAgaWYoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LW1vZGFsICNtZWRpdW1cIikuY2hlY2tlZCkgcHJpb3JpdHkgPSBcIk1lZGl1bVwiO1xuLy8gICAgICAgICBlbHNlIGlmKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1tb2RhbCAjaGlnaFwiKS5jaGVja2VkKSBwcmlvcml0eSA9IFwiSGlnaFwiO1xuLy8gICAgICAgICBlbHNlIHByaW9yaXR5O1xuLy8gICAgICAgICBjb25zdCBuZXdQcm9qZWN0ID0gdXNlclByb2plY3QodGl0bGUudmFsdWUsIGRlc2NyaXB0aW9uLnZhbHVlLCBkdWVEYXRlLnZhbHVlLCBwcmlvcml0eSk7XG4vLyAgICAgICAgIHByb2plY3RBcnIucHVzaChuZXdQcm9qZWN0KTtcbi8vICAgICAgICAgYWRkVG9Qcm9qZWN0TGlzdChwcm9qZWN0QXJyKTtcbi8vICAgICAgICAgZGlzcGxheVByb2plY3QobmV3UHJvamVjdCk7XG4vLyAgICAgICAgIHByb2plY3RNb2RhbC5jbG9zZSgpO1xuLy8gICAgICAgICBmb3JtLnJlc2V0KCk7XG4vLyAgICAgICAgIC8vIGNvbnNvbGUubG9nKHByb2plY3RBcnIpO1xuLy8gICAgICAgICByZXR1cm4gcHJvamVjdEFycjtcbi8vICAgICB9KTtcbi8vIH1cblxuLy8gZnVuY3Rpb24gZWRpdE1vZGFsKCkge1xuLy8gICAgIGNvbnN0IGVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC1tb2RhbFwiKTtcbi8vICAgICBlZGl0TW9kYWwuc2hvd01vZGFsKCk7XG4vLyAgICAgY29uc3QgY2xvc2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtY2xvc2VcIik7XG4vLyAgICAgY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbi8vICAgICAgICAgZWRpdE1vZGFsLmNsb3NlKCk7XG4vLyAgICAgfSk7XG4vLyAgICAgcmV0dXJuIGVkaXRNb2RhbDtcbi8vIH1cblxuLy8gZnVuY3Rpb24gZWRpdEZvcm0ocHJvamVjdEluZGV4KSB7XG4vLyAgICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC1mb3JtXCIpO1xuLy8gICAgIGNvbnN0IHByb2plY3RNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC1tb2RhbFwiKTtcbi8vICAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbi8vICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuLy8gICAgICAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWRpdC10aXRsZVwiKTtcbi8vICAgICAgICAgcHJvamVjdEFycltwcm9qZWN0SW5kZXhdLnRpdGxlID0gdGl0bGUudmFsdWU7XG4vLyAgICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0LWRlc2NyaXB0aW9uXCIpO1xuLy8gICAgICAgICBwcm9qZWN0QXJyW3Byb2plY3RJbmRleF0uZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbi52YWx1ZTtcbi8vICAgICAgICAgY29uc3QgZHVlRGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWRpdC1kdWUtZGF0ZVwiKTtcbi8vICAgICAgICAgcHJvamVjdEFycltwcm9qZWN0SW5kZXhdLmR1ZURhdGUgPSBkdWVEYXRlLnZhbHVlO1xuLy8gICAgICAgICBsZXQgcHJpb3JpdHkgPSBcIkxvd1wiO1xuLy8gICAgICAgICBpZihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtbW9kYWwgI21lZGl1bVwiKS5jaGVja2VkKSBwcmlvcml0eSA9IFwiTWVkaXVtXCI7XG4vLyAgICAgICAgIGVsc2UgaWYoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LW1vZGFsICNoaWdoXCIpLmNoZWNrZWQpIHByaW9yaXR5ID0gXCJIaWdoXCI7XG4vLyAgICAgICAgIGVsc2UgcHJpb3JpdHk7XG4vLyAgICAgICAgIHByb2plY3RBcnJbcHJvamVjdEluZGV4XS5wcmlvcml0eSA9IHByaW9yaXR5O1xuLy8gICAgICAgICBjb25zb2xlLmxvZyhcInByb2plY3QtbW9kdWxlXCIpO1xuLy8gICAgICAgICBjb25zb2xlLmxvZyhwcm9qZWN0QXJyKTtcbi8vICAgICAgICAgYWRkVG9Qcm9qZWN0TGlzdChwcm9qZWN0QXJyKTtcbi8vICAgICAgICAgZGlzcGxheVByb2plY3QocHJvamVjdEFycltwcm9qZWN0SW5kZXhdKTtcbi8vICAgICAgICAgdXBkYXRlVGFzayhwcm9qZWN0SW5kZXgsIHByb2plY3RBcnJbcHJvamVjdEluZGV4XS50aXRsZSk7XG4vLyAgICAgICAgIHByb2plY3RNb2RhbC5jbG9zZSgpO1xuLy8gICAgICAgICBmb3JtLnJlc2V0KCk7XG4vLyAgICAgICAgIHJldHVybiBwcm9qZWN0QXJyO1xuLy8gICAgIH0sIHtvbmNlOiB0cnVlfSk7IC8vcHJldmVudCBmb3JtIGZyb20gc3VibWl0dGluZyB0d2ljZSB3aGVuIGVkaXRpbmcgbW9yZSB0aGFuIG9uY2Vcbi8vIH1cblxuLy8gZnVuY3Rpb24gZGVsZXRlUHJvamVjdChwcm9qZWN0SW5kZXgpIHtcbi8vICAgICByZXR1cm4gcHJvamVjdEFyci5zcGxpY2UocHJvamVjdEluZGV4LCAxKTtcbi8vIH1cblxuLy8gY29uc3QgdXNlclByb2plY3QgPSAodGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSkgPT4ge1xuLy8gICAgIHJldHVybiB7dGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eX07XG4vLyB9IFxuXG5cbi8vIGV4cG9ydCB7cHJvamVjdE1vZGFsLCBwcm9qZWN0Rm9ybSwgcHJvamVjdEFyciwgZWRpdE1vZGFsLCBlZGl0Rm9ybSwgZGVsZXRlUHJvamVjdH07XG5cbmltcG9ydCB7IGRpc3BsYXlQcm9qZWN0LCBkaXNwbGF5TWFpbiwgZGlzcGxheURlbGV0ZU1haW4gfSBmcm9tIFwiLi9VSVwiO1xuXG5sZXQgcHJvamVjdEFyciA9IFtdO1xuXG5jb25zdCB1c2VyUHJvamVjdCA9ICh0aXRsZSwgZGVzYywgZHVlRGF0ZSwgcHJpb3JpdHkpID0+IHtcbiAgICByZXR1cm4ge3RpdGxlLCBkZXNjLCBkdWVEYXRlLCBwcmlvcml0eX07XG59XG5cbmZ1bmN0aW9uIHByb2plY3RGb3JtKCkge1xuICAgIGNvbnN0IHByb2plY3RNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1tb2RhbFwiKTtcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LWZvcm1cIik7XG4gICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRpdGxlXCIpO1xuICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVzY3JpcHRpb25cIik7XG4gICAgICAgIGNvbnN0IGR1ZURhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImR1ZS1kYXRlXCIpO1xuICAgICAgICBsZXQgcHJpb3JpdHkgPSBcIkxvd1wiO1xuICAgICAgICBpZihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtbW9kYWwgI21lZGl1bVwiKS5jaGVja2VkKSBwcmlvcml0eSA9IFwiTWVkaXVtXCI7XG4gICAgICAgIGVsc2UgaWYoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LW1vZGFsICNoaWdoXCIpLmNoZWNrZWQpIHByaW9yaXR5ID0gXCJIaWdoXCI7XG4gICAgICAgIGVsc2UgcHJpb3JpdHk7XG4gICAgICAgIGNvbnN0IG5ld1Byb2plY3QgPSB1c2VyUHJvamVjdCh0aXRsZS52YWx1ZSwgZGVzY3JpcHRpb24udmFsdWUsIGR1ZURhdGUudmFsdWUsIHByaW9yaXR5KTtcbiAgICAgICAgcHJvamVjdEFyci5wdXNoKG5ld1Byb2plY3QpO1xuICAgICAgICBkaXNwbGF5UHJvamVjdChwcm9qZWN0QXJyKTtcbiAgICAgICAgZGlzcGxheU1haW4obmV3UHJvamVjdCk7XG4gICAgICAgIHByb2plY3RNb2RhbC5jbG9zZSgpO1xuICAgICAgICBIVE1MRm9ybUVsZW1lbnQucHJvdG90eXBlLnJlc2V0LmNhbGwoZm9ybSk7XG4gICAgfSwge29uY2U6IHRydWV9KTtcbn1cblxuZnVuY3Rpb24gZWRpdFByb2plY3RGb3JtKHByb2plY3RUaXRsZSkge1xuICAgIGNvbnN0IGVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC1tb2RhbFwiKTtcbiAgICBjb25zdCBlZGl0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC1mb3JtXCIpO1xuICAgIGVkaXRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWRpdC10aXRsZVwiKTtcbiAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXQtZGVzY3JpcHRpb25cIik7XG4gICAgICAgIGNvbnN0IGR1ZURhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXQtZHVlLWRhdGVcIik7XG4gICAgICAgIGxldCBwcmlvcml0eSA9IFwiTG93XCI7XG4gICAgICAgIGlmKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC1mb3JtICNtZWRpdW1cIikuY2hlY2tlZCkgcHJpb3JpdHkgPSBcIk1lZGl1bVwiO1xuICAgICAgICBlbHNlIGlmKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC1mb3JtICNoaWdoXCIpLmNoZWNrZWQpIHByaW9yaXR5ID0gXCJIaWdoXCI7XG4gICAgICAgIGVsc2UgcHJpb3JpdHk7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gZmluZFByb2plY3QocHJvamVjdFRpdGxlKTtcbiAgICAgICAgcHJvamVjdEFycltpbmRleF0udGl0bGUgPSB0aXRsZS52YWx1ZTtcbiAgICAgICAgcHJvamVjdEFycltpbmRleF0uZGVzYyA9IGRlc2NyaXB0aW9uLnZhbHVlO1xuICAgICAgICBwcm9qZWN0QXJyW2luZGV4XS5kdWVEYXRlID0gZHVlRGF0ZS52YWx1ZTtcbiAgICAgICAgcHJvamVjdEFycltpbmRleF0ucHJpb3JpdHkgPSBwcmlvcml0eTtcbiAgICAgICAgZGlzcGxheVByb2plY3QocHJvamVjdEFycik7XG4gICAgICAgIGRpc3BsYXlNYWluKHByb2plY3RBcnJbaW5kZXhdKTtcbiAgICAgICAgZWRpdE1vZGFsLmNsb3NlKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKHByb2plY3RBcnIpO1xuICAgICAgICBIVE1MRm9ybUVsZW1lbnQucHJvdG90eXBlLnJlc2V0LmNhbGwoZWRpdEZvcm0pXG4gICAgfSwge29uY2U6IHRydWV9KTtcbn1cblxuZnVuY3Rpb24gZGVsZXRlUHJvamVjdChwcm9qZWN0VGl0bGUpIHtcbiAgICBjb25zdCBpbmRleCA9IGZpbmRQcm9qZWN0KHByb2plY3RUaXRsZSk7XG4gICAgcHJvamVjdEFyci5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIGNvbnNvbGUubG9nKHByb2plY3RBcnIpO1xuICAgIGRpc3BsYXlQcm9qZWN0KHByb2plY3RBcnIpO1xuICAgIGRpc3BsYXlEZWxldGVNYWluKHByb2plY3RBcnIpO1xufVxuXG5mdW5jdGlvbiBzZWxlY3RlZFByb2plY3QocHJvamVjdFRpdGxlKSB7XG4gICAgY29uc3QgaW5kZXggPSBmaW5kUHJvamVjdChwcm9qZWN0VGl0bGUpO1xuICAgIGRpc3BsYXlNYWluKHByb2plY3RBcnJbaW5kZXhdKTtcbn1cblxuZnVuY3Rpb24gZmluZFByb2plY3QocHJvamVjdFRpdGxlKSB7XG4gICAgcmV0dXJuIHByb2plY3RBcnIuZmluZEluZGV4KHByb2plY3QgPT4gcHJvamVjdC50aXRsZSA9PT0gcHJvamVjdFRpdGxlKTtcbn1cblxuXG5leHBvcnQge3Byb2plY3RGb3JtLCBlZGl0UHJvamVjdEZvcm0sIGRlbGV0ZVByb2plY3QsIHNlbGVjdGVkUHJvamVjdH07IiwiLy8gaW1wb3J0IHsgYWRkVG9UYXNrTGlzdCwgZGlzcGxheVRhc2sgfSBmcm9tIFwiLi9VSVwiO1xuXG4vLyBsZXQgdGFza0FyciA9IFtdO1xuXG4vLyBmdW5jdGlvbiB0YXNrTW9kYWwoKSB7XG4vLyAgICAgY29uc3QgdGFza01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrLW1vZGFsXCIpO1xuLy8gICAgIHRhc2tNb2RhbC5zaG93TW9kYWwoKTtcbi8vICAgICBjb25zdCBjbG9zZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFzay1jbG9zZVwiKTtcbi8vICAgICBjbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbi8vICAgICAgICAgdGFza01vZGFsLmNsb3NlKCk7XG4vLyAgICAgfSk7XG4vLyAgICAgcmV0dXJuIHRhc2tNb2RhbDtcbi8vIH1cblxuLy8gZnVuY3Rpb24gdGFza0Zvcm0oKSB7XG4vLyAgICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFzay1mb3JtXCIpO1xuLy8gICAgIGNvbnN0IHRhc2tNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFzay1tb2RhbFwiKTtcbi8vICAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbi1oZFwiKTtcbi8vICAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbi8vICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuLy8gICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFzay1kZXNjcmlwdGlvblwiKTtcbi8vICAgICAgICAgaWYoIWNoZWNrVGFza0FycmF5KHRpdGxlLnRleHRDb250ZW50KSkge1xuLy8gICAgICAgICAgICAgY29uc3QgbmV3VGFzayA9IHVzZXJUYXNrKHRpdGxlLnRleHRDb250ZW50LCBbZGVzY3JpcHRpb24udmFsdWVdKTtcbi8vICAgICAgICAgICAgIHRhc2tBcnIucHVzaChuZXdUYXNrKTtcbi8vICAgICAgICAgICAgIGNvbnN0IHByb2plY3RJbmRleCA9IHRhc2tBcnIuZmluZEluZGV4KHRhc2sgPT4gdGFzay5wcm9qZWN0ID09PSB0aXRsZS50ZXh0Q29udGVudCk7XG4vLyAgICAgICAgICAgICBkaXNwbGF5VGFzayh0YXNrQXJyW3Byb2plY3RJbmRleF0uZGVzY3JpcHRpb24pO1xuLy8gICAgICAgICB9ZWxzZSB7XG4vLyAgICAgICAgICAgICBjb25zdCBwcm9qZWN0SW5kZXggPSB0YXNrQXJyLmZpbmRJbmRleCh0YXNrID0+IHRhc2sucHJvamVjdCA9PT0gdGl0bGUudGV4dENvbnRlbnQpO1xuLy8gICAgICAgICAgICAgdGFza0Fycltwcm9qZWN0SW5kZXhdLmRlc2NyaXB0aW9uLnB1c2goZGVzY3JpcHRpb24udmFsdWUpOyBcbi8vICAgICAgICAgICAgIGRpc3BsYXlUYXNrKHRhc2tBcnJbcHJvamVjdEluZGV4XS5kZXNjcmlwdGlvbik7XG4vLyAgICAgICAgIH1cbi8vICAgICAgICAgLy8gYWRkVG9UYXNrTGlzdCh0YXNrQXJyKTtcbi8vICAgICAgICAgdGFza01vZGFsLmNsb3NlKCk7XG4vLyAgICAgICAgIGZvcm0ucmVzZXQoKTtcbi8vICAgICAgICAgLy8gY29uc29sZS5sb2codGFza0Fycik7XG4vLyAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRhc2tBcnJbMF0uZGVzY3JpcHRpb24pO1xuLy8gICAgICAgICByZXR1cm4gdGFza0Fycjtcbi8vICAgICB9KVxuLy8gfVxuXG4vLyBmdW5jdGlvbiBlZGl0VGFza01vZGFsKCkge1xuLy8gICAgIGNvbnN0IHRhc2tNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC10YXNrLW1vZGFsXCIpO1xuLy8gICAgIHRhc2tNb2RhbC5zaG93TW9kYWwoKTtcbi8vICAgICBjb25zdCBjbG9zZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC10YXNrLWNsb3NlXCIpO1xuLy8gICAgIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuLy8gICAgICAgICB0YXNrTW9kYWwuY2xvc2UoKTtcbi8vICAgICB9KTtcbi8vICAgICByZXR1cm4gdGFza01vZGFsO1xuLy8gfVxuXG4vLyBmdW5jdGlvbiBlZGl0VGFza0Zvcm0odGFza0luZGV4LCB0YXNrRGVzYykge1xuLy8gICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtdGFzay1mb3JtXCIpO1xuLy8gICAgIGNvbnN0IHRhc2tNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC10YXNrLW1vZGFsXCIpO1xuLy8gICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuLy8gICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4vLyAgICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0LXRhc2stZGVzY3JpcHRpb25cIik7XG4vLyAgICAgICAgIHRhc2tBcnJbdGFza0luZGV4XS5kZXNjcmlwdGlvblt0YXNrRGVzY10gPSBkZXNjcmlwdGlvbi52YWx1ZTtcbi8vICAgICAgICAgZGlzcGxheVRhc2sodGFza0Fyclt0YXNrSW5kZXhdLmRlc2NyaXB0aW9uKTtcbi8vICAgICAgICAgdGFza01vZGFsLmNsb3NlKCk7XG4vLyAgICAgICAgIGZvcm0ucmVzZXQoKTtcbi8vICAgICAgICAgcmV0dXJuIHRhc2tBcnI7XG4vLyAgICAgfSwge29uY2U6IHRydWV9KTtcbi8vIH1cblxuLy8gZnVuY3Rpb24gZGVsZXRlVGFzayh0YXNrSW5kZXgsIGRlc2NJbmRleCkge1xuLy8gICAgIHJldHVybiB0YXNrQXJyW3Rhc2tJbmRleF0uZGVzY3JpcHRpb24uc3BsaWNlKGRlc2NJbmRleCwgMSk7XG4vLyB9XG5cbi8vIGZ1bmN0aW9uIHVwZGF0ZVRhc2soaW5kZXgsIG5ld1RpdGxlKSB7XG4vLyAgICAgdGFza0FycltpbmRleF0ucHJvamVjdCA9IG5ld1RpdGxlO1xuLy8gICAgIGRpc3BsYXlUYXNrKHRhc2tBcnJbaW5kZXhdLmRlc2NyaXB0aW9uKTtcbi8vICAgICBjb25zb2xlLmxvZyh0YXNrQXJyW2luZGV4XSk7XG4vLyAgICAgcmV0dXJuIHRhc2tBcnI7XG4vLyB9XG5cbi8vIGZ1bmN0aW9uIGNoZWNrVGFza0FycmF5KHRpdGxlKSB7XG4vLyAgICAgaWYodGFza0Fyci5sZW5ndGggPT09IDApIHJldHVybiBmYWxzZTtcbi8vICAgICBmb3IobGV0IHggPSAwOyB4IDwgdGFza0Fyci5sZW5ndGg7IHgrKykge1xuLy8gICAgICAgICBpZih0YXNrQXJyW3hdLnByb2plY3QgPT09IHRpdGxlKSByZXR1cm4gdHJ1ZTtcbi8vICAgICB9XG4vLyB9XG5cbi8vIGZ1bmN0aW9uIHN0cmlrZVRocm91Z2goY2hlY2tib3gsIGVsKSB7XG4vLyAgICAgaWYoIWNoZWNrYm94LmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZVwiKSkge1xuLy8gICAgICAgICBjaGVja2JveC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIiNGRkI2NDdcIjtcbi8vICAgICAgICAgZWwuc3R5bGUudGV4dERlY29yYXRpb24gPSBcImxpbmUtdGhyb3VnaFwiO1xuLy8gICAgICAgICBjaGVja2JveC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuLy8gICAgIH1lbHNlIHtcbi8vICAgICAgICAgY2hlY2tib3guc3R5bGUuYmFja2dyb3VuZCA9IFwibm9uZVwiO1xuLy8gICAgICAgICBlbC5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9IFwibm9uZVwiO1xuLy8gICAgICAgICBjaGVja2JveC5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xuLy8gICAgIH1cbi8vIH1cblxuLy8gY29uc3QgdXNlclRhc2sgPSAocHJvamVjdCwgZGVzY3JpcHRpb24pID0+IHtcbi8vICAgICByZXR1cm4ge3Byb2plY3QsIGRlc2NyaXB0aW9ufTtcbi8vIH0gXG5cbi8vIGV4cG9ydCB7dGFza01vZGFsLCB0YXNrRm9ybSwgdGFza0FyciwgdXBkYXRlVGFzaywgZWRpdFRhc2tNb2RhbCwgZWRpdFRhc2tGb3JtLCBkZWxldGVUYXNrLCBzdHJpa2VUaHJvdWdofTtcblxuaW1wb3J0IHsgZGlzcGxheVRhc2sgfSBmcm9tIFwiLi9VSVwiO1xuXG5sZXQgdGFza0FyciA9IFtdO1xuXG5jb25zdCB1c2VyVGFzayA9ICh0aXRsZSwgZGVzYykgPT4ge1xuICAgIHJldHVybiB7dGl0bGUsIGRlc2N9O1xufVxuXG5mdW5jdGlvbiB0YXNrRm9ybSgpIHtcbiAgICBjb25zdCB0YXNrTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2stbW9kYWxcIik7XG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFzay1mb3JtXCIpO1xuICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluLWhkXCIpO1xuICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFzay1kZXNjcmlwdGlvblwiKTtcbiAgICAgICAgaWYoIXRhc2tUaXRsZU1hdGNoKHRpdGxlLnRleHRDb250ZW50KSkge1xuICAgICAgICAgICAgY29uc3QgbmV3VGFzayA9IHVzZXJUYXNrKHRpdGxlLnRleHRDb250ZW50LCBbZGVzY3JpcHRpb24udmFsdWVdKTtcbiAgICAgICAgICAgIHRhc2tBcnIucHVzaChuZXdUYXNrKTtcbiAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBmaW5kSW5kZXgodGFza0Fycik7XG4gICAgICAgICAgICB0YXNrQXJyW2luZGV4XS5kZXNjLnB1c2goZGVzY3JpcHRpb24udmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluZGV4ID0gZmluZEluZGV4KHRhc2tBcnIpO1xuICAgICAgICBkaXNwbGF5VGFzayh0YXNrQXJyW2luZGV4XS5kZXNjKTtcbiAgICAgICAgdGFza01vZGFsLmNsb3NlKCk7XG4gICAgICAgIEhUTUxGb3JtRWxlbWVudC5wcm90b3R5cGUucmVzZXQuY2FsbChmb3JtKVxuICAgIH0sIHtvbmNlOiB0cnVlfSk7XG59XG5cbmZ1bmN0aW9uIGVkaXRUYXNrRm9ybShwcm9qZWN0VGl0bGUsIHRhc2tUaXRsZSkge1xuICAgIGNvbnN0IGVkaXRUYXNrTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtdGFzay1tb2RhbFwiKTtcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LXRhc2stZm9ybVwiKTtcbiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbi1oZFwiKTtcbiAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXQtdGFzay1kZXNjcmlwdGlvblwiKTtcbiAgICAgICAgY29uc3QgaW5kZXggPSBmaW5kSW5kZXgodGFza0FyciwgcHJvamVjdFRpdGxlKTtcbiAgICAgICAgY29uc3QgdGFza0luZGV4ID0gZmluZFRhc2tJbmRleCh0YXNrQXJyW2luZGV4XS5kZXNjLCB0YXNrVGl0bGUpO1xuICAgICAgICBjb25zb2xlLmxvZyh0YXNrSW5kZXgpO1xuICAgICAgICB0YXNrQXJyW2luZGV4XS5kZXNjW3Rhc2tJbmRleF0gPSBkZXNjcmlwdGlvbi52YWx1ZTtcbiAgICAgICAgZGlzcGxheVRhc2sodGFza0FycltpbmRleF0uZGVzYyk7XG4gICAgICAgIGVkaXRUYXNrTW9kYWwuY2xvc2UoKTtcbiAgICAgICAgSFRNTEZvcm1FbGVtZW50LnByb3RvdHlwZS5yZXNldC5jYWxsKGZvcm0pXG4gICAgfSwge29uY2U6IHRydWV9KTtcbn1cblxuXG5mdW5jdGlvbiBkZWxldGVUYXNrKHByb2plY3RUaXRsZSkge1xuICAgIGNvbnN0IGluZGV4ID0gZmluZEluZGV4KHRhc2tBcnIsIHByb2plY3RUaXRsZSk7XG4gICAgdGFza0Fyci5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIGRpc3BsYXlUYXNrKHRhc2tBcnJbaW5kZXhdKTtcbiAgICBpZih0YXNrQXJyLmxlbmd0aCAhPT0gMCkgZGlzcGxheVRhc2sodGFza0FyclswXS5kZXNjKTtcbn1cblxuZnVuY3Rpb24gc2VsZWN0ZWRUYXNrKCkge1xuICAgIGNvbnN0IGluZGV4ID0gZmluZEluZGV4KHRhc2tBcnIpO1xuICAgIGlmKGluZGV4ICE9IC0xKSBkaXNwbGF5VGFzayh0YXNrQXJyW2luZGV4XS5kZXNjKTtcbn1cblxuZnVuY3Rpb24gZmluZEluZGV4KGFyciwgcHJvamVjdFRpdGxlKSB7XG4gICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW4taGRcIik7XG4gICAgaWYodHlwZW9mIHByb2plY3RUaXRsZSA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIGFyci5maW5kSW5kZXgodGFzayA9PiB0YXNrLnRpdGxlID09PSB0aXRsZS50ZXh0Q29udGVudCk7XG4gICAgZWxzZSByZXR1cm4gYXJyLmZpbmRJbmRleCh0YXNrID0+IHRhc2sudGl0bGUgPT09IHByb2plY3RUaXRsZSk7XG59XG5cbmZ1bmN0aW9uIGZpbmRUYXNrSW5kZXgoYXJyLCB0YXNrVGl0bGUpIHtcbiAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbi1oZFwiKTtcbiAgICByZXR1cm4gYXJyLmZpbmRJbmRleChpbmRleCA9PiBpbmRleCA9PT0gdGFza1RpdGxlKTtcbn1cblxuZnVuY3Rpb24gdGFza1RpdGxlTWF0Y2godGl0bGUpIHtcbiAgICBpZih0YXNrQXJyLmxlbmd0aCA9PT0gMCkgcmV0dXJuIGZhbHNlO1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0YXNrQXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmKHRhc2tBcnJbaV0udGl0bGUgPT09IHRpdGxlKSByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQge3Rhc2tGb3JtLCBzZWxlY3RlZFRhc2ssIGRlbGV0ZVRhc2ssIGVkaXRUYXNrRm9ybX07IiwiLy8gaW1wb3J0IHsgcHJvamVjdEFyciB9IGZyb20gXCIuL3Byb2plY3RcIjtcblxuLy8gZnVuY3Rpb24gZGlzcGxheUNvbXBsZXRlZExpc3QoaW5uZXJUZXh0KSB7XG4vLyAgICAgY29uc3QgY29tcGxldGVkTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29tcGxldGVkLWxpc3RcIik7XG4vLyAgICAgaWYoaW5uZXJUZXh0ID09PSBcIkNvbXBsZXRlZFxcbmV4cGFuZF9tb3JlXCIgfHwgaW5uZXJUZXh0ID09PSBcImV4cGFuZF9tb3JlXCIpIHtcbi8vICAgICAgICAgY29uc3QgcHJvamVjdEhvdmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi51c2VyLXByb2plY3RcIik7XG4vLyAgICAgICAgIHByb2plY3RIb3Zlci5mb3JFYWNoKChwcm9qZWN0KSA9PiB7XG4vLyAgICAgICAgICAgICBwcm9qZWN0LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgKCkgPT4ge1xuLy8gICAgICAgICAgICAgICAgIHByb2plY3Quc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMjk2KTsgYm9yZGVyLXJhZGl1czogNXB4O1wiKTtcbi8vICAgICAgICAgICAgIH0pO1xuLy8gICAgICAgICAgICAgcHJvamVjdC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgKCkgPT4ge1xuLy8gICAgICAgICAgICAgICAgIHByb2plY3Quc3R5bGUuYmFja2dyb3VuZCA9IFwibm9uZVwiO1xuLy8gICAgICAgICAgICAgfSk7XG4vLyAgICAgICAgIH0pXG4vLyAgICAgICAgIHJldHVybiBjb21wbGV0ZWRMaXN0LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XG4vLyAgICAgfWVsc2UgcmV0dXJuIGNvbXBsZXRlZExpc3QuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcbi8vIH1cblxuLy8gZnVuY3Rpb24gY2hhbmdlQXJyb3coYXJyb3dEaXJlY3Rpb24pIHtcbi8vICAgICBjb25zdCBhcnJvd0ljb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbXBsZXRlZC10YWIgLm1hdGVyaWFsLWljb25zLW91dGxpbmVkXCIpO1xuLy8gICAgIGlmKGFycm93RGlyZWN0aW9uID09PSBcIkNvbXBsZXRlZFxcbmV4cGFuZF9tb3JlXCIgfHwgYXJyb3dEaXJlY3Rpb24gPT09IFwiZXhwYW5kX21vcmVcIikgcmV0dXJuIGFycm93SWNvbi5pbm5lclRleHQgPSBcImV4cGFuZF9sZXNzXCJcbi8vICAgICBlbHNlIHJldHVybiBhcnJvd0ljb24uaW5uZXJUZXh0ID0gXCJleHBhbmRfbW9yZVwiO1xuLy8gfVxuXG4vLyBmdW5jdGlvbiBhZGRUb1Byb2plY3RMaXN0KGFycikge1xuLy8gICAgIGNvbnN0IGNvbXBsZXRlZExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtbGlzdFwiKTtcbi8vICAgICBjb21wbGV0ZWRMaXN0LnRleHRDb250ZW50ID0gXCJcIjtcbi8vICAgICBhcnIuZm9yRWFjaCgocHJvamVjdCkgPT4ge1xuLy8gICAgICAgICBjb25zdCBuZXdQcm9qZWN0Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbi8vICAgICAgICAgbmV3UHJvamVjdENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwibmV3LXByb2plY3QtY29uXCIpO1xuLy8gICAgICAgICBjb25zdCBwcm9qZWN0VGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbi8vICAgICAgICAgcHJvamVjdFRpdGxlLmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0LXRpdGxlXCIpO1xuLy8gICAgICAgICBwcm9qZWN0VGl0bGUudGV4dENvbnRlbnQgPSBwcm9qZWN0LnRpdGxlO1xuLy8gICAgICAgICBuZXdQcm9qZWN0Q29udGFpbmVyLmFwcGVuZENoaWxkKHByb2plY3RUaXRsZSk7XG4vLyAgICAgICAgIG5ld1Byb2plY3RDb250YWluZXIuYXBwZW5kQ2hpbGQoY3JlYXRlUHJvamVjdEJ1dHRvbnMoKSk7XG4vLyAgICAgICAgIGNvbXBsZXRlZExpc3QuYXBwZW5kQ2hpbGQobmV3UHJvamVjdENvbnRhaW5lcik7XG4vLyAgICAgfSlcbi8vICAgICByZXR1cm4gY29tcGxldGVkTGlzdDtcbi8vIH1cblxuLy8gZnVuY3Rpb24gZGlzcGxheVRhc2soYXJyKSB7XG4vLyAgICAgY29uc3QgdGFza0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtdGFzay1saXN0XCIpO1xuLy8gICAgIGNsZWFyVGFza0xpc3QoKTtcbi8vICAgICBhcnIuZm9yRWFjaCh0YXNrID0+IHtcbi8vICAgICAgICAgY29uc3QgcHJvamVjdFRhc2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuLy8gICAgICAgICBwcm9qZWN0VGFzay5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0LXRhc2snKTtcbi8vICAgICAgICAgY29uc3QgcHJvamVjdFRhc2tMZWZ0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbi8vICAgICAgICAgcHJvamVjdFRhc2tMZWZ0LmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0LXRhc2stbGVmdFwiKTtcbi8vICAgICAgICAgY29uc3QgY2hlY2tCb3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuLy8gICAgICAgICBjaGVja0JveC5jbGFzc0xpc3QuYWRkKCdjaGVja2JveCcpO1xuLy8gICAgICAgICBjb25zdCB0YXNrRGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbi8vICAgICAgICAgdGFza0Rlc2NyaXB0aW9uLmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0LXRhc2stZGVzY1wiKTtcbi8vICAgICAgICAgdGFza0Rlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gdGFzaztcbi8vICAgICAgICAgcHJvamVjdFRhc2tMZWZ0LmFwcGVuZENoaWxkKGNoZWNrQm94KTtcbi8vICAgICAgICAgcHJvamVjdFRhc2tMZWZ0LmFwcGVuZENoaWxkKHRhc2tEZXNjcmlwdGlvbik7XG4vLyAgICAgICAgIHByb2plY3RUYXNrLmFwcGVuZENoaWxkKHByb2plY3RUYXNrTGVmdCk7XG4vLyAgICAgICAgIHByb2plY3RUYXNrLmFwcGVuZENoaWxkKGNyZWF0ZVByb2plY3RCdXR0b25zKCkpO1xuLy8gICAgICAgICBjb25zdCBhZGRUYXNrQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtdGFza1wiKTtcbi8vICAgICAgICAgcmV0dXJuIHRhc2tMaXN0Lmluc2VydEJlZm9yZShwcm9qZWN0VGFzaywgYWRkVGFza0J0bik7XG4vLyAgICAgfSk7XG4vLyB9XG5cbi8vIGZ1bmN0aW9uIGRpc3BsYXlQcm9qZWN0KHByb2plY3RPYmopIHtcbi8vICAgICBjbGVhclRhc2tMaXN0KCk7XG4vLyAgICAgY29uc3QgaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluLWhkXCIpO1xuLy8gICAgIGhlYWRlci50ZXh0Q29udGVudCA9IHByb2plY3RPYmoudGl0bGU7XG4vLyAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW4taGQtZGVzY1wiKTtcbi8vICAgICBkZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IHByb2plY3RPYmouZGVzY3JpcHRpb247XG4vLyAgICAgY29uc3QgZGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbi1oZC1kYXRlLXVzZXJcIik7XG4vLyAgICAgZGF0ZS50ZXh0Q29udGVudCA9IHByb2plY3RPYmouZHVlRGF0ZTtcbi8vICAgICBjb25zdCBwcmlvcml0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbi1oZC1wcmlvcml0eS11c2VyXCIpO1xuLy8gICAgIHByaW9yaXR5LnRleHRDb250ZW50ID0gcHJvamVjdE9iai5wcmlvcml0eTtcbi8vICAgICBwcmlvcml0eS5zdHlsZS5jb2xvciA9IGNoYW5nZVByaW9yaXR5Q29sb3IocHJvamVjdE9iai5wcmlvcml0eSk7XG5cbi8vICAgICAvL2l0ZXJhdGUgdGhyb3VnaCBwcm9qZWN0IHRpdGxlIGVsZW1lbnQgdGhhdCBjb250YWlucyBwcm9qZWN0IHRpdGxlXG4vLyAgICAgZm9yIChjb25zdCBhIG9mIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucHJvamVjdC10aXRsZVwiKSkge1xuLy8gICAgICAgICBpZihhLnRleHRDb250ZW50LmluY2x1ZGVzKHByb2plY3RPYmoudGl0bGUpKSB7XG4vLyAgICAgICAgICAgICBhLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiY29sb3I6IHdoaXRlOyBvcGFjaXR5OiAxO1wiKTtcbi8vICAgICAgICAgICAgIGEucGFyZW50RWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yOTYpXCI7XG4vLyAgICAgICAgIH1lbHNlIHtcbi8vICAgICAgICAgICAgIGEuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJjb2xvcjogI0VCRUJFQjsgb3BhY2l0eTogLjU7XCIpO1xuLy8gICAgICAgICAgICAgYS5wYXJlbnRFbGVtZW50LnN0eWxlLmJhY2tncm91bmQgPSBcIm5vbmVcIjtcbi8vICAgICAgICAgfVxuLy8gICAgIH1cbi8vIH1cblxuLy8gZnVuY3Rpb24gcmVtb3ZlUHJvamVjdCgpIHtcbi8vICAgICBpZihwcm9qZWN0QXJyLmxlbmd0aCA9PT0gMCkge1xuLy8gICAgICAgICBjb25zdCBoZWFkZXJDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW4taGQtY29uXCIpO1xuLy8gICAgICAgICBoZWFkZXJDb250YWluZXIudGV4dENvbnRlbnQgPSBcIlwiO1xuLy8gICAgICAgICBoZWFkZXJDb250YWluZXIuc3R5bGUucGFkZGluZ0JvdHRvbSA9IFwiNi4xNXJlbVwiO1xuLy8gICAgICAgICByZXR1cm4gaGVhZGVyQ29udGFpbmVyO1xuLy8gICAgIH1lbHNlIHtcbi8vICAgICAgICAgY29uc3QgaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluLWhkXCIpO1xuLy8gICAgICAgICBoZWFkZXIudGV4dENvbnRlbnQgPSBwcm9qZWN0QXJyWzBdLnRpdGxlO1xuLy8gICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbi1oZC1kZXNjXCIpO1xuLy8gICAgICAgICBkZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IHByb2plY3RBcnJbMF0uZGVzY3JpcHRpb247XG4vLyAgICAgICAgIGNvbnN0IGRhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW4taGQtZGF0ZS11c2VyXCIpO1xuLy8gICAgICAgICBkYXRlLnRleHRDb250ZW50ID0gcHJvamVjdEFyclswXS5kdWVEYXRlO1xuLy8gICAgICAgICBjb25zdCBwcmlvcml0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbi1oZC1wcmlvcml0eS11c2VyXCIpO1xuLy8gICAgICAgICBwcmlvcml0eS50ZXh0Q29udGVudCA9IHByb2plY3RBcnJbMF0ucHJpb3JpdHk7XG4vLyAgICAgICAgIHByaW9yaXR5LnN0eWxlLmNvbG9yID0gY2hhbmdlUHJpb3JpdHlDb2xvcihwcm9qZWN0QXJyWzBdLnByaW9yaXR5KTtcbi8vICAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtdGl0bGVcIik7XG4vLyAgICAgICAgIHNlbGVjdGVkLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiY29sb3I6IHdoaXRlOyBvcGFjaXR5OiAxO1wiKTtcbi8vICAgICAgICAgc2VsZWN0ZWQucGFyZW50RWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yOTYpXCI7XG4vLyAgICAgfVxuLy8gfVxuXG4vLyBmdW5jdGlvbiBjaGFuZ2VQcmlvcml0eUNvbG9yKHByaW9yaXR5KSB7XG4vLyAgICAgaWYocHJpb3JpdHkgPT09IFwiTG93XCIpIHJldHVybiBcImdyZWVuXCI7XG4vLyAgICAgZWxzZSBpZihwcmlvcml0eSA9PT0gXCJNZWRpdW1cIikgcmV0dXJuIFwieWVsbG93XCI7XG4vLyAgICAgZWxzZSByZXR1cm4gXCJyZWRcIjtcbi8vIH1cblxuLy8gZnVuY3Rpb24gY3JlYXRlUHJvamVjdEJ1dHRvbnMoKSB7XG4vLyAgICAgY29uc3QgcHJvamVjdEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4vLyAgICAgcHJvamVjdEJ0bi5jbGFzc0xpc3QuYWRkKFwicHJvamVjdC1idG5cIik7XG4vLyAgICAgY29uc3QgZWRpdEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuLy8gICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuLy8gICAgIGVkaXRCdG4uY2xhc3NMaXN0LmFkZChcIm1hdGVyaWFsLWljb25zLW91dGxpbmVkXCIpO1xuLy8gICAgIGVkaXRCdG4uY2xhc3NMaXN0LmFkZChcImVkaXRcIik7XG4vLyAgICAgZGVsZXRlQnRuLmNsYXNzTGlzdC5hZGQoXCJtYXRlcmlhbC1pY29ucy1vdXRsaW5lZFwiKTtcbi8vICAgICBkZWxldGVCdG4uY2xhc3NMaXN0LmFkZChcImRlbGV0ZVwiKTtcbi8vICAgICBlZGl0QnRuLnRleHRDb250ZW50ID0gXCJlZGl0XCI7XG4vLyAgICAgZGVsZXRlQnRuLnRleHRDb250ZW50ID0gXCJkZWxldGVcIjtcbi8vICAgICBwcm9qZWN0QnRuLmFwcGVuZENoaWxkKGVkaXRCdG4pO1xuLy8gICAgIHByb2plY3RCdG4uYXBwZW5kQ2hpbGQoZGVsZXRlQnRuKTtcbi8vICAgICByZXR1cm4gcHJvamVjdEJ0bjtcbi8vIH1cblxuLy8gZnVuY3Rpb24gY2xlYXJUYXNrTGlzdCgpIHtcbi8vICAgICBjb25zdCB0YXNrTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC10YXNrLWxpc3RcIik7XG4vLyAgICAgY29uc3QgcHJvamVjdFRhc2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnByb2plY3QtdGFza1wiKTtcbi8vICAgICBmb3IobGV0IGkgPSAwOyBpIDwgcHJvamVjdFRhc2subGVuZ3RoOyBpKyspIHtcbi8vICAgICAgICAgdGFza0xpc3QucmVtb3ZlQ2hpbGQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LXRhc2tcIikpO1xuLy8gICAgIH1cbi8vICAgICByZXR1cm4gdGFza0xpc3Q7XG4vLyB9XG5cbi8vIGV4cG9ydCB7ZGlzcGxheUNvbXBsZXRlZExpc3QsIGNoYW5nZUFycm93LCBhZGRUb1Byb2plY3RMaXN0LCBkaXNwbGF5UHJvamVjdCwgZGlzcGxheVRhc2ssIHJlbW92ZVByb2plY3R9O1xuXG5cbmltcG9ydCB7IHByb2plY3RGb3JtLCBlZGl0UHJvamVjdEZvcm19IGZyb20gXCIuL3Byb2plY3RcIjtcbmltcG9ydCB7IHRhc2tGb3JtLCBlZGl0VGFza0Zvcm0gfSBmcm9tIFwiLi90YXNrXCI7XG5cblxuZnVuY3Rpb24gZGlzcGxheVByb2plY3RNb2RhbCgpIHtcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LWZvcm1cIik7XG4gICAgY29uc3QgcHJvamVjdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LW1vZGFsXCIpO1xuICAgIHByb2plY3RNb2RhbC5zaG93TW9kYWwoKTtcbiAgICBwcm9qZWN0Rm9ybSgpO1xuXG4gICAgY29uc3QgY2xvc2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtY2xvc2VcIik7XG4gICAgY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgcHJvamVjdE1vZGFsLmNsb3NlKCk7XG4gICAgICAgIEhUTUxGb3JtRWxlbWVudC5wcm90b3R5cGUucmVzZXQuY2FsbChmb3JtKVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBkaXNwbGF5RWRpdFByb2plY3RNb2RhbChwcm9qZWN0VGl0bGUpIHtcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LWZvcm1cIik7XG4gICAgY29uc3QgcHJvamVjdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LW1vZGFsXCIpO1xuICAgIHByb2plY3RNb2RhbC5zaG93TW9kYWwoKTtcbiAgICBlZGl0UHJvamVjdEZvcm0ocHJvamVjdFRpdGxlKTtcblxuICAgIGNvbnN0IGNsb3NlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LWNsb3NlXCIpO1xuICAgIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHByb2plY3RNb2RhbC5jbG9zZSgpO1xuICAgICAgICBIVE1MRm9ybUVsZW1lbnQucHJvdG90eXBlLnJlc2V0LmNhbGwoZm9ybSlcbiAgICB9KTtcbn1cblxuLyogZGlzcGxheWluZyBwcm9qZWN0IGxpc3Qgb24gbGVmdCBzaWRlIG9mIHNjcmVlbiAqL1xuZnVuY3Rpb24gZGlzcGxheVByb2plY3QoYXJyKSB7XG4gICAgY29uc3QgaGVhZGVyQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluLWhkLWNvblwiKTtcbiAgICBoZWFkZXJDb250YWluZXIuc3R5bGUucGFkZGluZ0JvdHRvbSA9IFwiMXJlbVwiO1xuICAgIGNvbnN0IHByb2plY3RMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LWxpc3RcIik7XG4gICAgcHJvamVjdExpc3QudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIGZvcihsZXQgcHJvamVjdCA9IDA7IHByb2plY3QgPCBhcnIubGVuZ3RoOyBwcm9qZWN0KyspIHtcbiAgICAgICAgcHJvamVjdExpc3QuYXBwZW5kQ2hpbGQoY3JlYXRlUHJvamVjdEVsKGFycltwcm9qZWN0XSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlUHJvamVjdEVsKGFycikge1xuICAgIGNvbnN0IHByb2plY3RDb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHByb2plY3RDb24uY2xhc3NMaXN0LmFkZChcIm5ldy1wcm9qZWN0LWNvblwiKTtcblxuICAgIGNvbnN0IHByb2plY3RUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgIHByb2plY3RUaXRsZS5jbGFzc0xpc3QuYWRkKFwicHJvamVjdC10aXRsZVwiKTtcbiAgICBwcm9qZWN0VGl0bGUudGV4dENvbnRlbnQgPSBhcnIudGl0bGU7XG4gICAgcHJvamVjdENvbi5hcHBlbmRDaGlsZChwcm9qZWN0VGl0bGUpO1xuICAgIHByb2plY3RDb24uYXBwZW5kQ2hpbGQoY3JlYXRlQnV0dG9ucygpKTtcbiAgICByZXR1cm4gcHJvamVjdENvbjtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQnV0dG9ucygpIHtcbiAgICBjb25zdCBwcm9qZWN0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBwcm9qZWN0QnRuLmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0LWJ0blwiKTtcblxuICAgIGNvbnN0IGVkaXRCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICBlZGl0QnRuLmNsYXNzTGlzdC5hZGQoXCJtYXRlcmlhbC1pY29ucy1vdXRsaW5lZFwiKTtcbiAgICBlZGl0QnRuLmNsYXNzTGlzdC5hZGQoXCJlZGl0XCIpO1xuICAgIGVkaXRCdG4udGV4dENvbnRlbnQgPSBcImVkaXRcIjtcbiAgICBwcm9qZWN0QnRuLmFwcGVuZENoaWxkKGVkaXRCdG4pO1xuXG4gICAgY29uc3QgZGVsZXRlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgZGVsZXRlQnRuLmNsYXNzTGlzdC5hZGQoXCJtYXRlcmlhbC1pY29ucy1vdXRsaW5lZFwiKTtcbiAgICBkZWxldGVCdG4uY2xhc3NMaXN0LmFkZChcImRlbGV0ZVwiKTtcbiAgICBkZWxldGVCdG4udGV4dENvbnRlbnQgPSBcImRlbGV0ZVwiO1xuICAgIHByb2plY3RCdG4uYXBwZW5kQ2hpbGQoZGVsZXRlQnRuKTtcbiAgICByZXR1cm4gcHJvamVjdEJ0bjtcbn1cblxuZnVuY3Rpb24gZGlzcGxheVRhc2tNb2RhbCgpIHtcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrLWZvcm1cIik7XG4gICAgY29uc3QgdGFza01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrLW1vZGFsXCIpO1xuICAgIHRhc2tNb2RhbC5zaG93TW9kYWwoKTtcbiAgICB0YXNrRm9ybSgpO1xuXG4gICAgY29uc3QgY2xvc2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2stY2xvc2VcIik7XG4gICAgY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGFza01vZGFsLmNsb3NlKCk7XG4gICAgICAgIEhUTUxGb3JtRWxlbWVudC5wcm90b3R5cGUucmVzZXQuY2FsbChmb3JtKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gZGlzcGxheUVkaXRUYXNrTW9kYWwocHJvamVjdFRpdGxlLHRhc2tUaXRsZSkge1xuICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtdGFzay1mb3JtXCIpO1xuICAgIGNvbnN0IGVkaXRUYXNrTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtdGFzay1tb2RhbFwiKTtcbiAgICBlZGl0VGFza01vZGFsLnNob3dNb2RhbCgpO1xuICAgIGVkaXRUYXNrRm9ybShwcm9qZWN0VGl0bGUsIHRhc2tUaXRsZSk7XG5cbiAgICBjb25zdCBjbG9zZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC10YXNrLWNsb3NlXCIpO1xuICAgIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGVkaXRUYXNrTW9kYWwuY2xvc2UoKTtcbiAgICAgICAgSFRNTEZvcm1FbGVtZW50LnByb3RvdHlwZS5yZXNldC5jYWxsKGZvcm0pO1xuICAgIH0pXG59XG5cbmZ1bmN0aW9uIGRpc3BsYXlUYXNrKGFycikge1xuICAgIGNvbnN0IHRhc2tMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LXRhc2stbGlzdFwiKTtcbiAgICBpZih0eXBlb2YgYXJyID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHRhc2tMaXN0LnRleHRDb250ZW50ID0gXCJcIjtcbiAgICB9ZWxzZSB7XG4gICAgICAgIHRhc2tMaXN0LnRleHRDb250ZW50ID0gXCJcIjtcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYXJyW2ldKTtcbiAgICAgICAgICAgIHRhc2tMaXN0LmFwcGVuZENoaWxkKGNyZWF0ZVRhc2tFbChhcnJbaV0pKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0YXNrTGlzdC5hcHBlbmRDaGlsZChjcmVhdGVBZGRUYXNrQnRuKCkpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVUYXNrRWwoZGVzYykge1xuICAgIGNvbnN0IHByb2plY3RUYXNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBwcm9qZWN0VGFzay5jbGFzc0xpc3QuYWRkKFwicHJvamVjdC10YXNrXCIpO1xuXG4gICAgY29uc3QgdGFza0xlZnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHRhc2tMZWZ0LmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0LXRhc2stbGVmdFwiKTtcbiAgICBwcm9qZWN0VGFzay5hcHBlbmRDaGlsZCh0YXNrTGVmdCk7XG5cbiAgICBjb25zdCBjaGVja2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgY2hlY2tib3guY2xhc3NMaXN0LmFkZChcImNoZWNrYm94XCIpO1xuICAgIHRhc2tMZWZ0LmFwcGVuZENoaWxkKGNoZWNrYm94KTtcblxuICAgIGNvbnN0IHRhc2tEZXNjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgdGFza0Rlc2MuY2xhc3NMaXN0LmFkZChcInByb2plY3QtdGFzay1kZXNjXCIpO1xuICAgIHRhc2tEZXNjLnRleHRDb250ZW50ID0gZGVzYztcbiAgICB0YXNrTGVmdC5hcHBlbmRDaGlsZCh0YXNrRGVzYyk7XG5cbiAgICBwcm9qZWN0VGFzay5hcHBlbmRDaGlsZChjcmVhdGVUYXNrQnV0dG9ucygpKTtcblxuICAgIHJldHVybiBwcm9qZWN0VGFzaztcbn1cblxuZnVuY3Rpb24gY3JlYXRlVGFza0J1dHRvbnMoKSB7XG4gICAgY29uc3QgcHJvamVjdEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgcHJvamVjdEJ0bi5jbGFzc0xpc3QuYWRkKFwicHJvamVjdC10YXNrLWJ0blwiKTtcblxuICAgIGNvbnN0IGVkaXRCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICBlZGl0QnRuLmNsYXNzTGlzdC5hZGQoXCJtYXRlcmlhbC1pY29ucy1vdXRsaW5lZFwiKTtcbiAgICBlZGl0QnRuLmNsYXNzTGlzdC5hZGQoXCJlZGl0XCIpO1xuICAgIGVkaXRCdG4udGV4dENvbnRlbnQgPSBcImVkaXRcIjtcbiAgICBwcm9qZWN0QnRuLmFwcGVuZENoaWxkKGVkaXRCdG4pO1xuXG4gICAgY29uc3QgZGVsZXRlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgZGVsZXRlQnRuLmNsYXNzTGlzdC5hZGQoXCJtYXRlcmlhbC1pY29ucy1vdXRsaW5lZFwiKTtcbiAgICBkZWxldGVCdG4uY2xhc3NMaXN0LmFkZChcImRlbGV0ZVwiKTtcbiAgICBkZWxldGVCdG4udGV4dENvbnRlbnQgPSBcImRlbGV0ZVwiO1xuICAgIHByb2plY3RCdG4uYXBwZW5kQ2hpbGQoZGVsZXRlQnRuKTtcbiAgICByZXR1cm4gcHJvamVjdEJ0bjtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQWRkVGFza0J0bigpIHtcbiAgICBjb25zdCBhZGRUYXNrQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICBhZGRUYXNrQnRuLmNsYXNzTGlzdC5hZGQoXCJhZGQtdGFza1wiKTtcblxuICAgIGNvbnN0IGFkZEljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICBhZGRJY29uLmNsYXNzTGlzdC5hZGQoXCJtYXRlcmlhbC1pY29ucy1vdXRsaW5lZFwiKTtcbiAgICBhZGRJY29uLmNsYXNzTGlzdC5hZGQoXCJhZGQtaWNvblwiKTtcbiAgICBhZGRJY29uLnRleHRDb250ZW50ID0gXCJhZGRcIjtcbiAgICBhZGRUYXNrQnRuLnByZXBlbmQoYWRkSWNvbiwgXCJBZGQgVGFza1wiKTtcbiAgICByZXR1cm4gYWRkVGFza0J0bjtcbn1cblxuZnVuY3Rpb24gZGlzcGxheU1haW4ocHJvamVjdCkge1xuICAgIGNvbnN0IGhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbi1oZFwiKTtcbiAgICBoZWFkZXIudGV4dENvbnRlbnQgPSBwcm9qZWN0LnRpdGxlO1xuXG4gICAgY29uc3QgZGVzYyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbi1oZC1kZXNjXCIpO1xuICAgIGRlc2MudGV4dENvbnRlbnQgPSBwcm9qZWN0LmRlc2M7XG5cbiAgICBjb25zdCBkdWVEYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluLWhkLWRhdGUtdXNlclwiKTtcbiAgICBkdWVEYXRlLnRleHRDb250ZW50ID0gcHJvamVjdC5kdWVEYXRlO1xuXG4gICAgY29uc3QgcHJpb3JpdHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW4taGQtcHJpb3JpdHktdXNlclwiKTtcbiAgICBwcmlvcml0eS50ZXh0Q29udGVudCA9IHByb2plY3QucHJpb3JpdHk7XG4gICAgcHJpb3JpdHkuc3R5bGUuY29sb3IgPSBwcmlvcml0eUNvbG9yKHByb2plY3QucHJpb3JpdHkpO1xuXG4gICAgY29uc3QgdGFza0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtdGFzay1saXN0XCIpO1xuICAgIHRhc2tMaXN0LnRleHRDb250ZW50ID0gXCJcIjtcbiAgICB0YXNrTGlzdC5hcHBlbmRDaGlsZChjcmVhdGVBZGRUYXNrQnRuKCkpO1xufVxuXG5mdW5jdGlvbiBkaXNwbGF5RGVsZXRlTWFpbihhcnIpIHtcbiAgICBjb25zdCBoZWFkZXJDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW4taGQtY29uXCIpO1xuXG4gICAgY29uc3QgaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluLWhkXCIpO1xuXG4gICAgY29uc3QgZGVzYyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbi1oZC1kZXNjXCIpO1xuXG4gICAgY29uc3QgZHVlRGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbi1oZC1kYXRlLXVzZXJcIik7XG5cbiAgICBjb25zdCBwcmlvcml0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbi1oZC1wcmlvcml0eS11c2VyXCIpO1xuXG4gICAgaWYoYXJyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBoZWFkZXIudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgICAgICBkZXNjLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICAgICAgZHVlRGF0ZS50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgICAgIHByaW9yaXR5LnRleHRDb250ZW50ID0gXCJcIjtcbiAgICAgICAgaGVhZGVyQ29udGFpbmVyLnN0eWxlLnBhZGRpbmdCb3R0b20gPSBcIjQuOXJlbVwiO1xuICAgIH1lbHNlIHtcbiAgICAgICAgaGVhZGVyLnRleHRDb250ZW50ID0gYXJyWzBdLnRpdGxlO1xuICAgICAgICBkZXNjLnRleHRDb250ZW50ID0gYXJyWzBdLmRlc2M7XG4gICAgICAgIGR1ZURhdGUudGV4dENvbnRlbnQgPSBhcnJbMF0uZHVlRGF0ZTtcbiAgICAgICAgcHJpb3JpdHkudGV4dENvbnRlbnQgPSBhcnJbMF0ucHJpb3JpdHk7XG4gICAgfVxuXG59XG5cbmZ1bmN0aW9uIHByaW9yaXR5Q29sb3IobGV2ZWwpIHtcbiAgICBpZihsZXZlbCA9PT0gXCJMb3dcIikgcmV0dXJuIFwiZ3JlZW5cIjtcbiAgICBlbHNlIGlmKGxldmVsID09PSBcIk1lZGl1bVwiKSByZXR1cm4gXCJ5ZWxsb3dcIjtcbiAgICBlbHNlIHJldHVybiBcInJlZFwiO1xufVxuXG5leHBvcnQge2Rpc3BsYXlQcm9qZWN0LCBkaXNwbGF5UHJvamVjdE1vZGFsLCBkaXNwbGF5RWRpdFByb2plY3RNb2RhbCwgZGlzcGxheU1haW4sIGRpc3BsYXlEZWxldGVNYWluLCBkaXNwbGF5VGFza01vZGFsLCBkaXNwbGF5VGFzaywgZGlzcGxheUVkaXRUYXNrTW9kYWx9OyIsIi8vIGltcG9ydCB7IHByb2plY3RNb2RhbCwgcHJvamVjdEZvcm0sIHByb2plY3RBcnIsIGVkaXRNb2RhbCwgZWRpdEZvcm0sIGRlbGV0ZVByb2plY3R9IGZyb20gXCIuL3Byb2plY3RcIjtcbi8vIGltcG9ydCB7IHRhc2tNb2RhbCwgdGFza0Zvcm0sIHRhc2tBcnIsIHVwZGF0ZVRhc2ssIGVkaXRUYXNrTW9kYWwsIGVkaXRUYXNrRm9ybSwgZGVsZXRlVGFzaywgc3RyaWtlVGhyb3VnaCB9IGZyb20gXCIuL3Rhc2tcIjtcbi8vIGltcG9ydCB7IGRpc3BsYXlDb21wbGV0ZWRMaXN0LCBjaGFuZ2VBcnJvdywgZGlzcGxheVByb2plY3QsIGRpc3BsYXlUYXNrLCByZW1vdmVQcm9qZWN0fSBmcm9tIFwiLi9VSVwiO1xuXG4vLyBjb25zdCBhZGRQcm9qZWN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtcHJvamVjdFwiKTtcbi8vIGFkZFByb2plY3RCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbi8vICAgICBwcm9qZWN0TW9kYWwoKTtcbi8vIH0pO1xuXG4vLyBwcm9qZWN0Rm9ybSgpO1xuLy8gdGFza0Zvcm0oKTtcblxuLy8gY29uc3QgcHJvamVjdExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnByb2plY3QtbGlzdFwiKTtcbi8vIHByb2plY3RMaXN0LmZvckVhY2goKHByb2plY3QpID0+IHtcbi8vICAgICBwcm9qZWN0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuLy8gICAgICAgICAvLyBjb25zb2xlLmxvZyhwcm9qZWN0QXJyKTtcbi8vICAgICAgICAgbGV0IHByb2plY3RUaXRsZSA9IFwiXCI7XG4vLyAgICAgICAgIGlmKGUudGFyZ2V0LmNsYXNzTGlzdC52YWx1ZSA9PT0gXCJwcm9qZWN0LXRpdGxlXCIpIHtcbi8vICAgICAgICAgICAgIHByb2plY3RUaXRsZSA9IGUudGFyZ2V0LmNoaWxkTm9kZXNbMF0udGV4dENvbnRlbnQ7XG4vLyAgICAgICAgIH1lbHNlIGlmKGUudGFyZ2V0LmNsYXNzTGlzdC52YWx1ZSA9PT0gXCJuZXctcHJvamVjdC1jb25cIikge1xuLy8gICAgICAgICAgICAgcHJvamVjdFRpdGxlID0gZS50YXJnZXQuY2hpbGROb2Rlc1swXS50ZXh0Q29udGVudDtcbi8vICAgICAgICAgfWVsc2Uge1xuLy8gICAgICAgICAgICAgcHJvamVjdFRpdGxlID0gZS50YXJnZXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmNoaWxkTm9kZXNbMF0udGV4dENvbnRlbnQ7XG4vLyAgICAgICAgIH1cbi8vICAgICAgICAgY29uc3QgcHJvamVjdEluZGV4ID0gcHJvamVjdEFyci5maW5kSW5kZXgocHJvamVjdCA9PiBwcm9qZWN0LnRpdGxlID09PSBwcm9qZWN0VGl0bGUpO1xuLy8gICAgICAgICBkaXNwbGF5UHJvamVjdChwcm9qZWN0QXJyW3Byb2plY3RJbmRleF0pO1xuLy8gICAgICAgICBjb25zdCB0YXNrSW5kZXggPSB0YXNrQXJyLmZpbmRJbmRleCh0YXNrID0+IHRhc2sucHJvamVjdCA9PT0gcHJvamVjdFRpdGxlKTtcbi8vICAgICAgICAgaWYodGFza0luZGV4ICE9PSAtMSkgZGlzcGxheVRhc2sodGFza0Fyclt0YXNrSW5kZXhdLmRlc2NyaXB0aW9uKTtcbi8vICAgICB9KVxuLy8gfSlcblxuLy8gY29uc3QgcHJvamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucHJvamVjdC1saXN0XCIpO1xuLy8gcHJvamVjdEJ0bi5mb3JFYWNoKGJ0biA9PiB7XG4vLyAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuLy8gICAgICAgICBpZihlLnRhcmdldC5jbGFzc0xpc3QudmFsdWUgPT09IFwibWF0ZXJpYWwtaWNvbnMtb3V0bGluZWQgZWRpdFwiKSB7XG4vLyAgICAgICAgICAgICBjb25zdCB0aXRsZSA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5jaGlsZE5vZGVzWzBdLnRleHRDb250ZW50O1xuLy8gICAgICAgICAgICAgY29uc3QgcHJvamVjdEluZGV4ID0gcHJvamVjdEFyci5maW5kSW5kZXgocHJvamVjdCA9PiBwcm9qZWN0LnRpdGxlID09PSB0aXRsZSk7XG4vLyAgICAgICAgICAgICBjb25zdCB0YXNrSW5kZXggPSB0YXNrQXJyLmZpbmRJbmRleCh0YXNrID0+IHRhc2sucHJvamVjdCA9PT0gdGl0bGUpO1xuLy8gICAgICAgICAgICAgZWRpdE1vZGFsKCk7XG4vLyAgICAgICAgICAgICBlZGl0Rm9ybShwcm9qZWN0SW5kZXgpO1xuLy8gICAgICAgICAgICAgLy8gdXBkYXRlVGFzayh0YXNrSW5kZXgsIHRpdGxlKTtcbi8vICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiaW5kZXggbW9kdWxlXCIpO1xuLy8gICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocHJvamVjdEFycik7XG4vLyAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhwcm9qZWN0QXJyW3Byb2plY3RJbmRleF0pO1xuLy8gICAgICAgICB9XG4vLyAgICAgICAgIGlmKGUudGFyZ2V0LmNsYXNzTGlzdC52YWx1ZSA9PT0gXCJtYXRlcmlhbC1pY29ucy1vdXRsaW5lZCBkZWxldGVcIikge1xuLy8gICAgICAgICAgICAgY29uc3QgdGl0bGUgPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuY2hpbGROb2Rlc1swXS50ZXh0Q29udGVudDtcbi8vICAgICAgICAgICAgIGNvbnN0IHByb2plY3RJbmRleCA9IHByb2plY3RBcnIuZmluZEluZGV4KHByb2plY3QgPT4gcHJvamVjdC50aXRsZSA9PT0gdGl0bGUpO1xuLy8gICAgICAgICAgICAgZGVsZXRlUHJvamVjdChwcm9qZWN0SW5kZXgpO1xuLy8gICAgICAgICAgICAgY29uc3QgcHJvamVjdExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtbGlzdFwiKTtcbi8vICAgICAgICAgICAgIHByb2plY3RMaXN0LnJlbW92ZUNoaWxkKGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudCk7XG4vLyAgICAgICAgICAgICByZW1vdmVQcm9qZWN0KHByb2plY3RBcnIpO1xuLy8gICAgICAgICB9XG4vLyAgICAgfSlcbi8vIH0pXG5cbi8vIGNvbnN0IHRhc2tCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnByb2plY3QtdGFzay1saXN0XCIpO1xuLy8gdGFza0J0bi5mb3JFYWNoKHRhc2sgPT4ge1xuLy8gICAgIHRhc2suYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4vLyAgICAgICAgIGlmKGUudGFyZ2V0LmNsYXNzTGlzdC52YWx1ZSA9PT0gXCJtYXRlcmlhbC1pY29ucy1vdXRsaW5lZCBlZGl0XCIpIHtcbi8vICAgICAgICAgICAgIGNvbnN0IHRhc2tEZXNjID0gZS50YXJnZXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmNoaWxkTm9kZXNbMF0uY2hpbGROb2Rlc1sxXS50ZXh0Q29udGVudDtcbi8vICAgICAgICAgICAgIGNvbnN0IGhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbi1oZFwiKS50ZXh0Q29udGVudDtcbi8vICAgICAgICAgICAgIGNvbnN0IHRhc2tJbmRleCA9IHRhc2tBcnIuZmluZEluZGV4KHRhc2sgPT4gdGFzay5wcm9qZWN0ID09PSBoZWFkZXIpO1xuLy8gICAgICAgICAgICAgY29uc3QgZGVzY0luZGV4ID0gdGFza0Fyclt0YXNrSW5kZXhdLmRlc2NyaXB0aW9uLmZpbmRJbmRleChkZXNjID0+IGRlc2MgPT09IHRhc2tEZXNjKTtcbi8vICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRlc2NJbmRleCk7XG4vLyAgICAgICAgICAgICBlZGl0VGFza01vZGFsKCk7XG4vLyAgICAgICAgICAgICBlZGl0VGFza0Zvcm0odGFza0luZGV4LCBkZXNjSW5kZXgpO1xuLy8gICAgICAgICB9XG4vLyAgICAgICAgIGlmKGUudGFyZ2V0LmNsYXNzTGlzdC52YWx1ZSA9PT0gXCJtYXRlcmlhbC1pY29ucy1vdXRsaW5lZCBkZWxldGVcIikge1xuLy8gICAgICAgICAgICAgY29uc3QgdGFza0Rlc2MgPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzWzFdLnRleHRDb250ZW50O1xuLy8gICAgICAgICAgICAgY29uc3QgaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluLWhkXCIpLnRleHRDb250ZW50O1xuLy8gICAgICAgICAgICAgY29uc3QgdGFza0luZGV4ID0gdGFza0Fyci5maW5kSW5kZXgodGFzayA9PiB0YXNrLnByb2plY3QgPT09IGhlYWRlcik7XG4vLyAgICAgICAgICAgICBjb25zdCBkZXNjSW5kZXggPSB0YXNrQXJyW3Rhc2tJbmRleF0uZGVzY3JpcHRpb24uZmluZEluZGV4KGRlc2MgPT4gZGVzYyA9PT0gdGFza0Rlc2MpO1xuLy8gICAgICAgICAgICAgZGVsZXRlVGFzayh0YXNrSW5kZXgsIGRlc2NJbmRleCk7XG4vLyAgICAgICAgICAgICBjb25zdCBwcm9qZWN0VGFza0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtdGFzay1saXN0XCIpO1xuLy8gICAgICAgICAgICAgcHJvamVjdFRhc2tMaXN0LnJlbW92ZUNoaWxkKGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudCk7XG4vLyAgICAgICAgIH1cbi8vICAgICAgICAgaWYoZS50YXJnZXQuY2xhc3NMaXN0LnZhbHVlID09PSBcImNoZWNrYm94XCIgfHwgZS50YXJnZXQuY2xhc3NMaXN0LnZhbHVlID09PSBcImNoZWNrYm94IGFjdGl2ZVwiKSB7XG4vLyAgICAgICAgICAgICBjb25zdCBkZXNjID0gZS50YXJnZXQucGFyZW50RWxlbWVudC5jaGlsZE5vZGVzWzFdO1xuLy8gICAgICAgICAgICAgY29uc3QgY2hlY2tib3ggPSBlLnRhcmdldDtcbi8vICAgICAgICAgICAgIHN0cmlrZVRocm91Z2goY2hlY2tib3gsIGRlc2MpO1xuLy8gICAgICAgICB9XG4vLyAgICAgfSlcbi8vIH0pXG5cbi8vIGNvbnN0IGFkZFRhc2tidG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC10YXNrXCIpO1xuLy8gYWRkVGFza2J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuLy8gICAgIHRhc2tNb2RhbCgpO1xuLy8gfSk7XG5cbi8vIGNvbnN0IGNvbXBsZXRlZFRhYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29tcGxldGVkLXRhYlwiKTtcbi8vIGNvbXBsZXRlZFRhYi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbi8vICAgICBjb25zdCBpbm5lclRleHQgPSBlLnRhcmdldC5pbm5lclRleHQ7XG4vLyAgICAgaWYoaW5uZXJUZXh0ID09PSBcIkNvbXBsZXRlZFxcbmV4cGFuZF9tb3JlXCIgfHwgaW5uZXJUZXh0ID09PSBcImV4cGFuZF9tb3JlXCIpIHtcbi8vICAgICAgICAgY2hhbmdlQXJyb3coaW5uZXJUZXh0KTtcbi8vICAgICAgICAgZGlzcGxheUNvbXBsZXRlZExpc3QoaW5uZXJUZXh0KTtcbi8vICAgICB9ZWxzZSB7XG4vLyAgICAgICAgIGNoYW5nZUFycm93KGlubmVyVGV4dCk7XG4vLyAgICAgICAgIGRpc3BsYXlDb21wbGV0ZWRMaXN0KGlubmVyVGV4dCk7XG4vLyAgICAgfVxuLy8gfSk7XG5cbmltcG9ydCB7IGRpc3BsYXlQcm9qZWN0TW9kYWwsIGRpc3BsYXlFZGl0UHJvamVjdE1vZGFsLCBkaXNwbGF5VGFza01vZGFsLCBkaXNwbGF5RWRpdFRhc2tNb2RhbH0gZnJvbSBcIi4vVUlcIjtcbmltcG9ydCB7IGRlbGV0ZVByb2plY3QsIHNlbGVjdGVkUHJvamVjdCB9IGZyb20gXCIuL3Byb2plY3RcIjtcbmltcG9ydCB7IHNlbGVjdGVkVGFzaywgZGVsZXRlVGFzayB9IGZyb20gXCIuL3Rhc2tcIjtcblxuY29uc3QgYWRkUHJvamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkLXByb2plY3RcIik7XG5hZGRQcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgZGlzcGxheVByb2plY3RNb2RhbCgpO1xufSk7XG5cbmNvbnN0IGVkaXRQcm9qZWN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LWxpc3RcIik7XG5lZGl0UHJvamVjdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICBpZihlLnRhcmdldC5jbGFzc05hbWUgPT09IFwibWF0ZXJpYWwtaWNvbnMtb3V0bGluZWQgZWRpdFwiKSB7XG4gICAgICAgIGNvbnN0IHByb2plY3RUaXRsZSA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5jaGlsZE5vZGVzWzBdLnRleHRDb250ZW50O1xuICAgICAgICBkaXNwbGF5RWRpdFByb2plY3RNb2RhbChwcm9qZWN0VGl0bGUpO1xuICAgIH1lbHNlIGlmKGUudGFyZ2V0LmNsYXNzTmFtZSA9PT0gXCJtYXRlcmlhbC1pY29ucy1vdXRsaW5lZCBkZWxldGVcIikge1xuICAgICAgICBjb25zdCBwcm9qZWN0VGl0bGUgPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuY2hpbGROb2Rlc1swXS50ZXh0Q29udGVudDtcbiAgICAgICAgZGVsZXRlUHJvamVjdChwcm9qZWN0VGl0bGUpO1xuICAgICAgICBkZWxldGVUYXNrKHByb2plY3RUaXRsZSk7XG4gICAgfWVsc2Uge1xuICAgICAgICBpZihlLnRhcmdldC5jbGFzc05hbWUgPT09IFwicHJvamVjdC10aXRsZVwiKSB7XG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0VGl0bGUgPSBlLnRhcmdldC5jbGFzc05hbWU7XG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0Q29uID0gZS50YXJnZXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgICAgc2VsZWN0ZWRQcm9qZWN0KHByb2plY3RUaXRsZSk7XG4gICAgICAgICAgICBzZWxlY3RlZFRhc2soKTtcbiAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgY29uc3QgcHJvamVjdFRpdGxlID0gZS50YXJnZXQuY2hpbGROb2Rlc1swXS50ZXh0Q29udGVudDtcbiAgICAgICAgICAgIGNvbnN0IHByb2plY3RDb24gPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgICAgc2VsZWN0ZWRQcm9qZWN0KHByb2plY3RUaXRsZSk7XG4gICAgICAgICAgICBzZWxlY3RlZFRhc2soKTtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG5jb25zdCB0YXNrTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC10YXNrLWxpc3RcIik7XG50YXNrTGlzdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICBpZihlLnRhcmdldC5jbGFzc05hbWUgPT09IFwiYWRkLXRhc2tcIikge1xuICAgICAgICBkaXNwbGF5VGFza01vZGFsKCk7XG4gICAgfWVsc2UgaWYoZS50YXJnZXQuY2xhc3NOYW1lID09PSBcIm1hdGVyaWFsLWljb25zLW91dGxpbmVkIGVkaXRcIikge1xuICAgICAgICBjb25zdCB0YXNrVGl0bGUgPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuY2hpbGROb2Rlc1swXS50ZXh0Q29udGVudDtcbiAgICAgICAgY29uc3QgcHJvamVjdFRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluLWhkXCIpLnRleHRDb250ZW50O1xuICAgICAgICBkaXNwbGF5RWRpdFRhc2tNb2RhbChwcm9qZWN0VGl0bGUsIHRhc2tUaXRsZSk7XG4gICAgfVxufSkiXSwibmFtZXMiOlsicHJvamVjdEFyciIsInNlbGVjdGVkUHJvamVjdCIsInByb2plY3RUaXRsZSIsImluZGV4IiwiZmluZFByb2plY3QiLCJkaXNwbGF5TWFpbiIsImZpbmRJbmRleCIsInByb2plY3QiLCJ0aXRsZSIsInRhc2tBcnIiLCJzZWxlY3RlZFRhc2siLCJkaXNwbGF5VGFzayIsImRlc2MiLCJhcnIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0YXNrIiwidGV4dENvbnRlbnQiLCJkaXNwbGF5UHJvamVjdCIsInN0eWxlIiwicGFkZGluZ0JvdHRvbSIsInByb2plY3RMaXN0IiwibGVuZ3RoIiwiYXBwZW5kQ2hpbGQiLCJjcmVhdGVQcm9qZWN0RWwiLCJwcm9qZWN0Q29uIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInByb2plY3RCdG4iLCJlZGl0QnRuIiwiZGVsZXRlQnRuIiwiY3JlYXRlQnV0dG9ucyIsInRhc2tMaXN0IiwiaSIsImNvbnNvbGUiLCJsb2ciLCJjcmVhdGVUYXNrRWwiLCJjcmVhdGVBZGRUYXNrQnRuIiwicHJvamVjdFRhc2siLCJ0YXNrTGVmdCIsImNoZWNrYm94IiwidGFza0Rlc2MiLCJjcmVhdGVUYXNrQnV0dG9ucyIsImFkZFRhc2tCdG4iLCJhZGRJY29uIiwicHJlcGVuZCIsImR1ZURhdGUiLCJwcmlvcml0eSIsImxldmVsIiwiY29sb3IiLCJhZGRFdmVudExpc3RlbmVyIiwiZm9ybSIsInByb2plY3RNb2RhbCIsInNob3dNb2RhbCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImdldEVsZW1lbnRCeUlkIiwiZGVzY3JpcHRpb24iLCJjaGVja2VkIiwibmV3UHJvamVjdCIsInVzZXJQcm9qZWN0IiwidmFsdWUiLCJwdXNoIiwiY2xvc2UiLCJIVE1MRm9ybUVsZW1lbnQiLCJwcm90b3R5cGUiLCJyZXNldCIsImNhbGwiLCJvbmNlIiwicHJvamVjdEZvcm0iLCJkaXNwbGF5UHJvamVjdE1vZGFsIiwidGFyZ2V0IiwiY2xhc3NOYW1lIiwiZWRpdE1vZGFsIiwiZWRpdEZvcm0iLCJlZGl0UHJvamVjdEZvcm0iLCJkaXNwbGF5RWRpdFByb2plY3RNb2RhbCIsInBhcmVudEVsZW1lbnQiLCJjaGlsZE5vZGVzIiwic3BsaWNlIiwiaGVhZGVyQ29udGFpbmVyIiwiaGVhZGVyIiwiZGlzcGxheURlbGV0ZU1haW4iLCJkZWxldGVQcm9qZWN0IiwiZGVsZXRlVGFzayIsInRhc2tNb2RhbCIsInRhc2tUaXRsZU1hdGNoIiwibmV3VGFzayIsInVzZXJUYXNrIiwidGFza0Zvcm0iLCJkaXNwbGF5VGFza01vZGFsIiwidGFza1RpdGxlIiwiZWRpdFRhc2tNb2RhbCIsInRhc2tJbmRleCIsImZpbmRUYXNrSW5kZXgiLCJlZGl0VGFza0Zvcm0iLCJkaXNwbGF5RWRpdFRhc2tNb2RhbCJdLCJzb3VyY2VSb290IjoiIn0=