(()=>{"use strict";let e=[];function t(t){const o=n(t);u(e[o])}function n(t){return e.findIndex((e=>e.title===t))}let o=[];function c(){const e=d(o);-1!=e&&s(o[e].desc)}function d(e,t){const n=document.querySelector(".main-hd");return void 0===t?e.findIndex((e=>e.title===n.textContent)):e.findIndex((e=>e.title===t))}function l(e){document.querySelector(".main-hd-con").style.paddingBottom="1rem";const t=document.querySelector(".project-list");t.textContent="";for(let n=0;n<e.length;n++)t.appendChild(r(e[n]))}function r(e){const t=document.createElement("div");t.classList.add("new-project-con");const n=document.createElement("p");return n.classList.add("project-title"),n.textContent=e.title,t.appendChild(n),t.appendChild(function(){const e=document.createElement("div");e.classList.add("project-btn");const t=document.createElement("span");t.classList.add("material-icons-outlined"),t.classList.add("edit"),t.textContent="edit",e.appendChild(t);const n=document.createElement("span");return n.classList.add("material-icons-outlined"),n.classList.add("delete"),n.textContent="delete",e.appendChild(n),e}()),t}function s(e){const t=document.querySelector(".project-task-list");if(void 0===e)t.textContent="";else{t.textContent="";for(let n=0;n<e.length;n++)console.log(e[n]),t.appendChild(i(e[n]))}t.appendChild(a())}function i(e){const t=document.createElement("div");t.classList.add("project-task");const n=document.createElement("div");n.classList.add("project-task-left"),t.appendChild(n);const o=document.createElement("div");o.classList.add("checkbox"),n.appendChild(o);const c=document.createElement("p");return c.classList.add("project-task-desc"),c.textContent=e,n.appendChild(c),t.appendChild(function(){const e=document.createElement("div");e.classList.add("project-task-btn");const t=document.createElement("span");t.classList.add("material-icons-outlined"),t.classList.add("edit"),t.textContent="edit",e.appendChild(t);const n=document.createElement("span");return n.classList.add("material-icons-outlined"),n.classList.add("delete"),n.textContent="delete",e.appendChild(n),e}()),t}function a(){const e=document.createElement("button");e.classList.add("add-task");const t=document.createElement("span");return t.classList.add("material-icons-outlined"),t.classList.add("add-icon"),t.textContent="add",e.prepend(t,"Add Task"),e}function u(e){document.querySelector(".main-hd").textContent=e.title,document.querySelector(".main-hd-desc").textContent=e.desc,document.querySelector(".main-hd-date-user").textContent=e.dueDate;const t=document.querySelector(".main-hd-priority-user");var n;t.textContent=e.priority,t.style.color="Low"===(n=e.priority)?"green":"Medium"===n?"yellow":"red";const o=document.querySelector(".project-task-list");o.textContent="",o.appendChild(a())}document.querySelector(".add-project").addEventListener("click",(()=>{!function(){const t=document.querySelector(".project-form"),n=document.querySelector(".project-modal");n.showModal(),function(){const t=document.querySelector(".project-modal"),n=document.querySelector(".project-form");n.addEventListener("submit",(o=>{o.preventDefault();const c=document.getElementById("title"),d=document.getElementById("description"),r=document.getElementById("due-date");let s="Low";document.querySelector(".project-modal #medium").checked?s="Medium":document.querySelector(".project-modal #high").checked&&(s="High");const i=((e,t,n,o)=>({title:e,desc:t,dueDate:n,priority:o}))(c.value,d.value,r.value,s);e.push(i),l(e),u(i),t.close(),HTMLFormElement.prototype.reset.call(n)}),{once:!0})}(),document.querySelector(".project-close").addEventListener("click",(()=>{n.close(),HTMLFormElement.prototype.reset.call(t)}))}()})),document.querySelector(".project-list").addEventListener("click",(r=>{if("material-icons-outlined edit"===r.target.className)!function(t){const o=document.querySelector(".edit-form"),c=document.querySelector(".edit-modal");c.showModal(),function(t){const o=document.querySelector(".edit-modal"),c=document.querySelector(".edit-form");c.addEventListener("submit",(d=>{d.preventDefault();const r=document.getElementById("edit-title"),s=document.getElementById("edit-description"),i=document.getElementById("edit-due-date");let a="Low";document.querySelector(".edit-form #medium").checked?a="Medium":document.querySelector(".edit-form #high").checked&&(a="High");const m=n(t);e[m].title=r.value,e[m].desc=s.value,e[m].dueDate=i.value,e[m].priority=a,l(e),u(e[m]),o.close(),console.log(e),HTMLFormElement.prototype.reset.call(c)}),{once:!0})}(t),document.querySelector(".edit-close").addEventListener("click",(()=>{c.close(),HTMLFormElement.prototype.reset.call(o)}))}(r.target.parentElement.parentElement.childNodes[0].textContent);else if("material-icons-outlined delete"===r.target.className){const t=r.target.parentElement.parentElement.childNodes[0].textContent;(function(t){const o=n(t);e.splice(o,1),console.log(e),l(e),function(e){const t=document.querySelector(".main-hd-con"),n=document.querySelector(".main-hd"),o=document.querySelector(".main-hd-desc"),c=document.querySelector(".main-hd-date-user"),d=document.querySelector(".main-hd-priority-user");0===e.length?(n.textContent="",o.textContent="",c.textContent="",d.textContent="",t.style.paddingBottom="4.9rem"):(n.textContent=e[0].title,o.textContent=e[0].desc,c.textContent=e[0].dueDate,d.textContent=e[0].priority)}(e)})(t),function(e){const t=d(o,e);o.splice(t,1),s(o[t]),0!==o.length&&s(o[0].desc)}(t)}else if("project-title"===r.target.className){const e=r.target.className;r.target.parentElement.parentElement,t(e),c()}else{const e=r.target.childNodes[0].textContent;r.target.parentElement,t(e),c()}})),document.querySelector(".project-task-list").addEventListener("click",(e=>{"add-task"===e.target.className&&function(){const e=document.querySelector(".task-form"),t=document.querySelector(".task-modal");t.showModal(),function(){const e=document.querySelector(".task-modal"),t=document.querySelector(".task-form");t.addEventListener("submit",(n=>{n.preventDefault();const c=document.querySelector(".main-hd"),l=document.getElementById("task-description");if(function(e){if(0===o.length)return!1;for(let t=0;t<o.length;t++)if(o[t].title===e)return!0;return!1}(c.textContent)){const e=d(o);o[e].desc.push(l.value)}else{const e=((e,t)=>({title:e,desc:t}))(c.textContent,[l.value]);o.push(e)}const r=d(o);s(o[r].desc),e.close(),HTMLFormElement.prototype.reset.call(t)}),{once:!0})}(),document.querySelector(".task-close").addEventListener("click",(()=>{t.close(),HTMLFormElement.prototype.reset.call(e)}))}()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cGFjazovL3RvLWRvLy4vc3JjL3Rhc2suanMiLCJ3ZWJwYWNrOi8vdG8tZG8vLi9zcmMvVUkuanMiLCJ3ZWJwYWNrOi8vdG8tZG8vLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gaW1wb3J0IHsgYWRkVG9Qcm9qZWN0TGlzdCwgZGlzcGxheVByb2plY3QgfSBmcm9tIFwiLi9VSVwiO1xuLy8gaW1wb3J0IHsgdXBkYXRlVGFzayB9IGZyb20gXCIuL3Rhc2tcIjtcblxuLy8gbGV0IHByb2plY3RBcnIgPSBbXTtcblxuLy8gZnVuY3Rpb24gcHJvamVjdE1vZGFsKCkge1xuLy8gICAgIGNvbnN0IHByb2plY3RNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1tb2RhbFwiKTtcbi8vICAgICBwcm9qZWN0TW9kYWwuc2hvd01vZGFsKCk7XG4vLyAgICAgY29uc3QgY2xvc2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtY2xvc2VcIik7XG4vLyAgICAgY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbi8vICAgICAgICAgcHJvamVjdE1vZGFsLmNsb3NlKCk7XG4vLyAgICAgfSk7XG4vLyAgICAgcmV0dXJuIHByb2plY3RNb2RhbDtcbi8vIH1cblxuLy8gZnVuY3Rpb24gcHJvamVjdEZvcm0oKSB7XG4vLyAgICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1mb3JtXCIpO1xuLy8gICAgIGNvbnN0IHByb2plY3RNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1tb2RhbFwiKTtcbi8vICAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbi8vICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuLy8gICAgICAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGl0bGVcIik7XG4vLyAgICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZXNjcmlwdGlvblwiKTtcbi8vICAgICAgICAgY29uc3QgZHVlRGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZHVlLWRhdGVcIik7XG4vLyAgICAgICAgIGxldCBwcmlvcml0eSA9IFwiTG93XCI7XG4vLyAgICAgICAgIGlmKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1tb2RhbCAjbWVkaXVtXCIpLmNoZWNrZWQpIHByaW9yaXR5ID0gXCJNZWRpdW1cIjtcbi8vICAgICAgICAgZWxzZSBpZihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtbW9kYWwgI2hpZ2hcIikuY2hlY2tlZCkgcHJpb3JpdHkgPSBcIkhpZ2hcIjtcbi8vICAgICAgICAgZWxzZSBwcmlvcml0eTtcbi8vICAgICAgICAgY29uc3QgbmV3UHJvamVjdCA9IHVzZXJQcm9qZWN0KHRpdGxlLnZhbHVlLCBkZXNjcmlwdGlvbi52YWx1ZSwgZHVlRGF0ZS52YWx1ZSwgcHJpb3JpdHkpO1xuLy8gICAgICAgICBwcm9qZWN0QXJyLnB1c2gobmV3UHJvamVjdCk7XG4vLyAgICAgICAgIGFkZFRvUHJvamVjdExpc3QocHJvamVjdEFycik7XG4vLyAgICAgICAgIGRpc3BsYXlQcm9qZWN0KG5ld1Byb2plY3QpO1xuLy8gICAgICAgICBwcm9qZWN0TW9kYWwuY2xvc2UoKTtcbi8vICAgICAgICAgZm9ybS5yZXNldCgpO1xuLy8gICAgICAgICAvLyBjb25zb2xlLmxvZyhwcm9qZWN0QXJyKTtcbi8vICAgICAgICAgcmV0dXJuIHByb2plY3RBcnI7XG4vLyAgICAgfSk7XG4vLyB9XG5cbi8vIGZ1bmN0aW9uIGVkaXRNb2RhbCgpIHtcbi8vICAgICBjb25zdCBlZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtbW9kYWxcIik7XG4vLyAgICAgZWRpdE1vZGFsLnNob3dNb2RhbCgpO1xuLy8gICAgIGNvbnN0IGNsb3NlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LWNsb3NlXCIpO1xuLy8gICAgIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4vLyAgICAgICAgIGVkaXRNb2RhbC5jbG9zZSgpO1xuLy8gICAgIH0pO1xuLy8gICAgIHJldHVybiBlZGl0TW9kYWw7XG4vLyB9XG5cbi8vIGZ1bmN0aW9uIGVkaXRGb3JtKHByb2plY3RJbmRleCkge1xuLy8gICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtZm9ybVwiKTtcbi8vICAgICBjb25zdCBwcm9qZWN0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtbW9kYWxcIik7XG4vLyAgICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4vLyAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbi8vICAgICAgICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXQtdGl0bGVcIik7XG4vLyAgICAgICAgIHByb2plY3RBcnJbcHJvamVjdEluZGV4XS50aXRsZSA9IHRpdGxlLnZhbHVlO1xuLy8gICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWRpdC1kZXNjcmlwdGlvblwiKTtcbi8vICAgICAgICAgcHJvamVjdEFycltwcm9qZWN0SW5kZXhdLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb24udmFsdWU7XG4vLyAgICAgICAgIGNvbnN0IGR1ZURhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXQtZHVlLWRhdGVcIik7XG4vLyAgICAgICAgIHByb2plY3RBcnJbcHJvamVjdEluZGV4XS5kdWVEYXRlID0gZHVlRGF0ZS52YWx1ZTtcbi8vICAgICAgICAgbGV0IHByaW9yaXR5ID0gXCJMb3dcIjtcbi8vICAgICAgICAgaWYoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LW1vZGFsICNtZWRpdW1cIikuY2hlY2tlZCkgcHJpb3JpdHkgPSBcIk1lZGl1bVwiO1xuLy8gICAgICAgICBlbHNlIGlmKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC1tb2RhbCAjaGlnaFwiKS5jaGVja2VkKSBwcmlvcml0eSA9IFwiSGlnaFwiO1xuLy8gICAgICAgICBlbHNlIHByaW9yaXR5O1xuLy8gICAgICAgICBwcm9qZWN0QXJyW3Byb2plY3RJbmRleF0ucHJpb3JpdHkgPSBwcmlvcml0eTtcbi8vICAgICAgICAgY29uc29sZS5sb2coXCJwcm9qZWN0LW1vZHVsZVwiKTtcbi8vICAgICAgICAgY29uc29sZS5sb2cocHJvamVjdEFycik7XG4vLyAgICAgICAgIGFkZFRvUHJvamVjdExpc3QocHJvamVjdEFycik7XG4vLyAgICAgICAgIGRpc3BsYXlQcm9qZWN0KHByb2plY3RBcnJbcHJvamVjdEluZGV4XSk7XG4vLyAgICAgICAgIHVwZGF0ZVRhc2socHJvamVjdEluZGV4LCBwcm9qZWN0QXJyW3Byb2plY3RJbmRleF0udGl0bGUpO1xuLy8gICAgICAgICBwcm9qZWN0TW9kYWwuY2xvc2UoKTtcbi8vICAgICAgICAgZm9ybS5yZXNldCgpO1xuLy8gICAgICAgICByZXR1cm4gcHJvamVjdEFycjtcbi8vICAgICB9LCB7b25jZTogdHJ1ZX0pOyAvL3ByZXZlbnQgZm9ybSBmcm9tIHN1Ym1pdHRpbmcgdHdpY2Ugd2hlbiBlZGl0aW5nIG1vcmUgdGhhbiBvbmNlXG4vLyB9XG5cbi8vIGZ1bmN0aW9uIGRlbGV0ZVByb2plY3QocHJvamVjdEluZGV4KSB7XG4vLyAgICAgcmV0dXJuIHByb2plY3RBcnIuc3BsaWNlKHByb2plY3RJbmRleCwgMSk7XG4vLyB9XG5cbi8vIGNvbnN0IHVzZXJQcm9qZWN0ID0gKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHkpID0+IHtcbi8vICAgICByZXR1cm4ge3RpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHl9O1xuLy8gfSBcblxuXG4vLyBleHBvcnQge3Byb2plY3RNb2RhbCwgcHJvamVjdEZvcm0sIHByb2plY3RBcnIsIGVkaXRNb2RhbCwgZWRpdEZvcm0sIGRlbGV0ZVByb2plY3R9O1xuXG5pbXBvcnQgeyBkaXNwbGF5UHJvamVjdCwgZGlzcGxheU1haW4sIGRpc3BsYXlEZWxldGVNYWluIH0gZnJvbSBcIi4vVUlcIjtcblxubGV0IHByb2plY3RBcnIgPSBbXTtcblxuY29uc3QgdXNlclByb2plY3QgPSAodGl0bGUsIGRlc2MsIGR1ZURhdGUsIHByaW9yaXR5KSA9PiB7XG4gICAgcmV0dXJuIHt0aXRsZSwgZGVzYywgZHVlRGF0ZSwgcHJpb3JpdHl9O1xufVxuXG5mdW5jdGlvbiBwcm9qZWN0Rm9ybSgpIHtcbiAgICBjb25zdCBwcm9qZWN0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtbW9kYWxcIik7XG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1mb3JtXCIpO1xuICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aXRsZVwiKTtcbiAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlc2NyaXB0aW9uXCIpO1xuICAgICAgICBjb25zdCBkdWVEYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkdWUtZGF0ZVwiKTtcbiAgICAgICAgbGV0IHByaW9yaXR5ID0gXCJMb3dcIjtcbiAgICAgICAgaWYoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LW1vZGFsICNtZWRpdW1cIikuY2hlY2tlZCkgcHJpb3JpdHkgPSBcIk1lZGl1bVwiO1xuICAgICAgICBlbHNlIGlmKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1tb2RhbCAjaGlnaFwiKS5jaGVja2VkKSBwcmlvcml0eSA9IFwiSGlnaFwiO1xuICAgICAgICBlbHNlIHByaW9yaXR5O1xuICAgICAgICBjb25zdCBuZXdQcm9qZWN0ID0gdXNlclByb2plY3QodGl0bGUudmFsdWUsIGRlc2NyaXB0aW9uLnZhbHVlLCBkdWVEYXRlLnZhbHVlLCBwcmlvcml0eSk7XG4gICAgICAgIHByb2plY3RBcnIucHVzaChuZXdQcm9qZWN0KTtcbiAgICAgICAgZGlzcGxheVByb2plY3QocHJvamVjdEFycik7XG4gICAgICAgIGRpc3BsYXlNYWluKG5ld1Byb2plY3QpO1xuICAgICAgICBwcm9qZWN0TW9kYWwuY2xvc2UoKTtcbiAgICAgICAgSFRNTEZvcm1FbGVtZW50LnByb3RvdHlwZS5yZXNldC5jYWxsKGZvcm0pO1xuICAgIH0sIHtvbmNlOiB0cnVlfSk7XG59XG5cbmZ1bmN0aW9uIGVkaXRQcm9qZWN0Rm9ybShwcm9qZWN0VGl0bGUpIHtcbiAgICBjb25zdCBlZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtbW9kYWxcIik7XG4gICAgY29uc3QgZWRpdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtZm9ybVwiKTtcbiAgICBlZGl0Rm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXQtdGl0bGVcIik7XG4gICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0LWRlc2NyaXB0aW9uXCIpO1xuICAgICAgICBjb25zdCBkdWVEYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0LWR1ZS1kYXRlXCIpO1xuICAgICAgICBsZXQgcHJpb3JpdHkgPSBcIkxvd1wiO1xuICAgICAgICBpZihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtZm9ybSAjbWVkaXVtXCIpLmNoZWNrZWQpIHByaW9yaXR5ID0gXCJNZWRpdW1cIjtcbiAgICAgICAgZWxzZSBpZihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtZm9ybSAjaGlnaFwiKS5jaGVja2VkKSBwcmlvcml0eSA9IFwiSGlnaFwiO1xuICAgICAgICBlbHNlIHByaW9yaXR5O1xuICAgICAgICBjb25zdCBpbmRleCA9IGZpbmRQcm9qZWN0KHByb2plY3RUaXRsZSk7XG4gICAgICAgIHByb2plY3RBcnJbaW5kZXhdLnRpdGxlID0gdGl0bGUudmFsdWU7XG4gICAgICAgIHByb2plY3RBcnJbaW5kZXhdLmRlc2MgPSBkZXNjcmlwdGlvbi52YWx1ZTtcbiAgICAgICAgcHJvamVjdEFycltpbmRleF0uZHVlRGF0ZSA9IGR1ZURhdGUudmFsdWU7XG4gICAgICAgIHByb2plY3RBcnJbaW5kZXhdLnByaW9yaXR5ID0gcHJpb3JpdHk7XG4gICAgICAgIGRpc3BsYXlQcm9qZWN0KHByb2plY3RBcnIpO1xuICAgICAgICBkaXNwbGF5TWFpbihwcm9qZWN0QXJyW2luZGV4XSk7XG4gICAgICAgIGVkaXRNb2RhbC5jbG9zZSgpO1xuICAgICAgICBjb25zb2xlLmxvZyhwcm9qZWN0QXJyKTtcbiAgICAgICAgSFRNTEZvcm1FbGVtZW50LnByb3RvdHlwZS5yZXNldC5jYWxsKGVkaXRGb3JtKVxuICAgIH0sIHtvbmNlOiB0cnVlfSk7XG59XG5cbmZ1bmN0aW9uIGRlbGV0ZVByb2plY3QocHJvamVjdFRpdGxlKSB7XG4gICAgY29uc3QgaW5kZXggPSBmaW5kUHJvamVjdChwcm9qZWN0VGl0bGUpO1xuICAgIHByb2plY3RBcnIuc3BsaWNlKGluZGV4LCAxKTtcbiAgICBjb25zb2xlLmxvZyhwcm9qZWN0QXJyKTtcbiAgICBkaXNwbGF5UHJvamVjdChwcm9qZWN0QXJyKTtcbiAgICBkaXNwbGF5RGVsZXRlTWFpbihwcm9qZWN0QXJyKTtcbn1cblxuZnVuY3Rpb24gc2VsZWN0ZWRQcm9qZWN0KHByb2plY3RUaXRsZSkge1xuICAgIGNvbnN0IGluZGV4ID0gZmluZFByb2plY3QocHJvamVjdFRpdGxlKTtcbiAgICBkaXNwbGF5TWFpbihwcm9qZWN0QXJyW2luZGV4XSk7XG59XG5cbmZ1bmN0aW9uIGZpbmRQcm9qZWN0KHByb2plY3RUaXRsZSkge1xuICAgIHJldHVybiBwcm9qZWN0QXJyLmZpbmRJbmRleChwcm9qZWN0ID0+IHByb2plY3QudGl0bGUgPT09IHByb2plY3RUaXRsZSk7XG59XG5cblxuZXhwb3J0IHtwcm9qZWN0Rm9ybSwgZWRpdFByb2plY3RGb3JtLCBkZWxldGVQcm9qZWN0LCBzZWxlY3RlZFByb2plY3R9OyIsIi8vIGltcG9ydCB7IGFkZFRvVGFza0xpc3QsIGRpc3BsYXlUYXNrIH0gZnJvbSBcIi4vVUlcIjtcblxuLy8gbGV0IHRhc2tBcnIgPSBbXTtcblxuLy8gZnVuY3Rpb24gdGFza01vZGFsKCkge1xuLy8gICAgIGNvbnN0IHRhc2tNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFzay1tb2RhbFwiKTtcbi8vICAgICB0YXNrTW9kYWwuc2hvd01vZGFsKCk7XG4vLyAgICAgY29uc3QgY2xvc2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2stY2xvc2VcIik7XG4vLyAgICAgY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4vLyAgICAgICAgIHRhc2tNb2RhbC5jbG9zZSgpO1xuLy8gICAgIH0pO1xuLy8gICAgIHJldHVybiB0YXNrTW9kYWw7XG4vLyB9XG5cbi8vIGZ1bmN0aW9uIHRhc2tGb3JtKCkge1xuLy8gICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2stZm9ybVwiKTtcbi8vICAgICBjb25zdCB0YXNrTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2stbW9kYWxcIik7XG4vLyAgICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW4taGRcIik7XG4vLyAgICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4vLyAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbi8vICAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2stZGVzY3JpcHRpb25cIik7XG4vLyAgICAgICAgIGlmKCFjaGVja1Rhc2tBcnJheSh0aXRsZS50ZXh0Q29udGVudCkpIHtcbi8vICAgICAgICAgICAgIGNvbnN0IG5ld1Rhc2sgPSB1c2VyVGFzayh0aXRsZS50ZXh0Q29udGVudCwgW2Rlc2NyaXB0aW9uLnZhbHVlXSk7XG4vLyAgICAgICAgICAgICB0YXNrQXJyLnB1c2gobmV3VGFzayk7XG4vLyAgICAgICAgICAgICBjb25zdCBwcm9qZWN0SW5kZXggPSB0YXNrQXJyLmZpbmRJbmRleCh0YXNrID0+IHRhc2sucHJvamVjdCA9PT0gdGl0bGUudGV4dENvbnRlbnQpO1xuLy8gICAgICAgICAgICAgZGlzcGxheVRhc2sodGFza0Fycltwcm9qZWN0SW5kZXhdLmRlc2NyaXB0aW9uKTtcbi8vICAgICAgICAgfWVsc2Uge1xuLy8gICAgICAgICAgICAgY29uc3QgcHJvamVjdEluZGV4ID0gdGFza0Fyci5maW5kSW5kZXgodGFzayA9PiB0YXNrLnByb2plY3QgPT09IHRpdGxlLnRleHRDb250ZW50KTtcbi8vICAgICAgICAgICAgIHRhc2tBcnJbcHJvamVjdEluZGV4XS5kZXNjcmlwdGlvbi5wdXNoKGRlc2NyaXB0aW9uLnZhbHVlKTsgXG4vLyAgICAgICAgICAgICBkaXNwbGF5VGFzayh0YXNrQXJyW3Byb2plY3RJbmRleF0uZGVzY3JpcHRpb24pO1xuLy8gICAgICAgICB9XG4vLyAgICAgICAgIC8vIGFkZFRvVGFza0xpc3QodGFza0Fycik7XG4vLyAgICAgICAgIHRhc2tNb2RhbC5jbG9zZSgpO1xuLy8gICAgICAgICBmb3JtLnJlc2V0KCk7XG4vLyAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRhc2tBcnIpO1xuLy8gICAgICAgICAvLyBjb25zb2xlLmxvZyh0YXNrQXJyWzBdLmRlc2NyaXB0aW9uKTtcbi8vICAgICAgICAgcmV0dXJuIHRhc2tBcnI7XG4vLyAgICAgfSlcbi8vIH1cblxuLy8gZnVuY3Rpb24gZWRpdFRhc2tNb2RhbCgpIHtcbi8vICAgICBjb25zdCB0YXNrTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtdGFzay1tb2RhbFwiKTtcbi8vICAgICB0YXNrTW9kYWwuc2hvd01vZGFsKCk7XG4vLyAgICAgY29uc3QgY2xvc2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtdGFzay1jbG9zZVwiKTtcbi8vICAgICBjbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbi8vICAgICAgICAgdGFza01vZGFsLmNsb3NlKCk7XG4vLyAgICAgfSk7XG4vLyAgICAgcmV0dXJuIHRhc2tNb2RhbDtcbi8vIH1cblxuLy8gZnVuY3Rpb24gZWRpdFRhc2tGb3JtKHRhc2tJbmRleCwgdGFza0Rlc2MpIHtcbi8vICAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LXRhc2stZm9ybVwiKTtcbi8vICAgICBjb25zdCB0YXNrTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtdGFzay1tb2RhbFwiKTtcbi8vICAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbi8vICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuLy8gICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWRpdC10YXNrLWRlc2NyaXB0aW9uXCIpO1xuLy8gICAgICAgICB0YXNrQXJyW3Rhc2tJbmRleF0uZGVzY3JpcHRpb25bdGFza0Rlc2NdID0gZGVzY3JpcHRpb24udmFsdWU7XG4vLyAgICAgICAgIGRpc3BsYXlUYXNrKHRhc2tBcnJbdGFza0luZGV4XS5kZXNjcmlwdGlvbik7XG4vLyAgICAgICAgIHRhc2tNb2RhbC5jbG9zZSgpO1xuLy8gICAgICAgICBmb3JtLnJlc2V0KCk7XG4vLyAgICAgICAgIHJldHVybiB0YXNrQXJyO1xuLy8gICAgIH0sIHtvbmNlOiB0cnVlfSk7XG4vLyB9XG5cbi8vIGZ1bmN0aW9uIGRlbGV0ZVRhc2sodGFza0luZGV4LCBkZXNjSW5kZXgpIHtcbi8vICAgICByZXR1cm4gdGFza0Fyclt0YXNrSW5kZXhdLmRlc2NyaXB0aW9uLnNwbGljZShkZXNjSW5kZXgsIDEpO1xuLy8gfVxuXG4vLyBmdW5jdGlvbiB1cGRhdGVUYXNrKGluZGV4LCBuZXdUaXRsZSkge1xuLy8gICAgIHRhc2tBcnJbaW5kZXhdLnByb2plY3QgPSBuZXdUaXRsZTtcbi8vICAgICBkaXNwbGF5VGFzayh0YXNrQXJyW2luZGV4XS5kZXNjcmlwdGlvbik7XG4vLyAgICAgY29uc29sZS5sb2codGFza0FycltpbmRleF0pO1xuLy8gICAgIHJldHVybiB0YXNrQXJyO1xuLy8gfVxuXG4vLyBmdW5jdGlvbiBjaGVja1Rhc2tBcnJheSh0aXRsZSkge1xuLy8gICAgIGlmKHRhc2tBcnIubGVuZ3RoID09PSAwKSByZXR1cm4gZmFsc2U7XG4vLyAgICAgZm9yKGxldCB4ID0gMDsgeCA8IHRhc2tBcnIubGVuZ3RoOyB4KyspIHtcbi8vICAgICAgICAgaWYodGFza0Fyclt4XS5wcm9qZWN0ID09PSB0aXRsZSkgcmV0dXJuIHRydWU7XG4vLyAgICAgfVxuLy8gfVxuXG4vLyBmdW5jdGlvbiBzdHJpa2VUaHJvdWdoKGNoZWNrYm94LCBlbCkge1xuLy8gICAgIGlmKCFjaGVja2JveC5jbGFzc0xpc3QuY29udGFpbnMoXCJhY3RpdmVcIikpIHtcbi8vICAgICAgICAgY2hlY2tib3guc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCIjRkZCNjQ3XCI7XG4vLyAgICAgICAgIGVsLnN0eWxlLnRleHREZWNvcmF0aW9uID0gXCJsaW5lLXRocm91Z2hcIjtcbi8vICAgICAgICAgY2hlY2tib3guY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcbi8vICAgICB9ZWxzZSB7XG4vLyAgICAgICAgIGNoZWNrYm94LnN0eWxlLmJhY2tncm91bmQgPSBcIm5vbmVcIjtcbi8vICAgICAgICAgZWwuc3R5bGUudGV4dERlY29yYXRpb24gPSBcIm5vbmVcIjtcbi8vICAgICAgICAgY2hlY2tib3guY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbi8vICAgICB9XG4vLyB9XG5cbi8vIGNvbnN0IHVzZXJUYXNrID0gKHByb2plY3QsIGRlc2NyaXB0aW9uKSA9PiB7XG4vLyAgICAgcmV0dXJuIHtwcm9qZWN0LCBkZXNjcmlwdGlvbn07XG4vLyB9IFxuXG4vLyBleHBvcnQge3Rhc2tNb2RhbCwgdGFza0Zvcm0sIHRhc2tBcnIsIHVwZGF0ZVRhc2ssIGVkaXRUYXNrTW9kYWwsIGVkaXRUYXNrRm9ybSwgZGVsZXRlVGFzaywgc3RyaWtlVGhyb3VnaH07XG5cbmltcG9ydCB7IGRpc3BsYXlUYXNrIH0gZnJvbSBcIi4vVUlcIjtcblxubGV0IHRhc2tBcnIgPSBbXTtcblxuY29uc3QgdXNlclRhc2sgPSAodGl0bGUsIGRlc2MpID0+IHtcbiAgICByZXR1cm4ge3RpdGxlLCBkZXNjfTtcbn1cblxuZnVuY3Rpb24gdGFza0Zvcm0oKSB7XG4gICAgY29uc3QgdGFza01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrLW1vZGFsXCIpO1xuICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2stZm9ybVwiKTtcbiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbi1oZFwiKTtcbiAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2stZGVzY3JpcHRpb25cIik7XG4gICAgICAgIGlmKCF0YXNrVGl0bGVNYXRjaCh0aXRsZS50ZXh0Q29udGVudCkpIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld1Rhc2sgPSB1c2VyVGFzayh0aXRsZS50ZXh0Q29udGVudCwgW2Rlc2NyaXB0aW9uLnZhbHVlXSk7XG4gICAgICAgICAgICB0YXNrQXJyLnB1c2gobmV3VGFzayk7XG4gICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gZmluZEluZGV4KHRhc2tBcnIpO1xuICAgICAgICAgICAgdGFza0FycltpbmRleF0uZGVzYy5wdXNoKGRlc2NyaXB0aW9uLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbmRleCA9IGZpbmRJbmRleCh0YXNrQXJyKTtcbiAgICAgICAgZGlzcGxheVRhc2sodGFza0FycltpbmRleF0uZGVzYyk7XG4gICAgICAgIHRhc2tNb2RhbC5jbG9zZSgpO1xuICAgICAgICBIVE1MRm9ybUVsZW1lbnQucHJvdG90eXBlLnJlc2V0LmNhbGwoZm9ybSlcbiAgICB9LCB7b25jZTogdHJ1ZX0pO1xufVxuXG5mdW5jdGlvbiBkZWxldGVUYXNrKHByb2plY3RUaXRsZSkge1xuICAgIGNvbnN0IGluZGV4ID0gZmluZEluZGV4KHRhc2tBcnIsIHByb2plY3RUaXRsZSk7XG4gICAgdGFza0Fyci5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIGRpc3BsYXlUYXNrKHRhc2tBcnJbaW5kZXhdKTtcbiAgICBpZih0YXNrQXJyLmxlbmd0aCAhPT0gMCkgZGlzcGxheVRhc2sodGFza0FyclswXS5kZXNjKTtcbn1cblxuZnVuY3Rpb24gc2VsZWN0ZWRUYXNrKCkge1xuICAgIGNvbnN0IGluZGV4ID0gZmluZEluZGV4KHRhc2tBcnIpO1xuICAgIGlmKGluZGV4ICE9IC0xKSBkaXNwbGF5VGFzayh0YXNrQXJyW2luZGV4XS5kZXNjKTtcbn1cblxuZnVuY3Rpb24gZmluZEluZGV4KGFyciwgcHJvamVjdFRpdGxlKSB7XG4gICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW4taGRcIik7XG4gICAgaWYodHlwZW9mIHByb2plY3RUaXRsZSA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIGFyci5maW5kSW5kZXgodGFzayA9PiB0YXNrLnRpdGxlID09PSB0aXRsZS50ZXh0Q29udGVudCk7XG4gICAgZWxzZSByZXR1cm4gYXJyLmZpbmRJbmRleCh0YXNrID0+IHRhc2sudGl0bGUgPT09IHByb2plY3RUaXRsZSk7XG59XG5cbmZ1bmN0aW9uIHRhc2tUaXRsZU1hdGNoKHRpdGxlKSB7XG4gICAgaWYodGFza0Fyci5sZW5ndGggPT09IDApIHJldHVybiBmYWxzZTtcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGFza0Fyci5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZih0YXNrQXJyW2ldLnRpdGxlID09PSB0aXRsZSkgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IHt0YXNrRm9ybSwgc2VsZWN0ZWRUYXNrLCBkZWxldGVUYXNrfTsiLCIvLyBpbXBvcnQgeyBwcm9qZWN0QXJyIH0gZnJvbSBcIi4vcHJvamVjdFwiO1xuXG4vLyBmdW5jdGlvbiBkaXNwbGF5Q29tcGxldGVkTGlzdChpbm5lclRleHQpIHtcbi8vICAgICBjb25zdCBjb21wbGV0ZWRMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb21wbGV0ZWQtbGlzdFwiKTtcbi8vICAgICBpZihpbm5lclRleHQgPT09IFwiQ29tcGxldGVkXFxuZXhwYW5kX21vcmVcIiB8fCBpbm5lclRleHQgPT09IFwiZXhwYW5kX21vcmVcIikge1xuLy8gICAgICAgICBjb25zdCBwcm9qZWN0SG92ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnVzZXItcHJvamVjdFwiKTtcbi8vICAgICAgICAgcHJvamVjdEhvdmVyLmZvckVhY2goKHByb2plY3QpID0+IHtcbi8vICAgICAgICAgICAgIHByb2plY3QuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCAoKSA9PiB7XG4vLyAgICAgICAgICAgICAgICAgcHJvamVjdC5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yOTYpOyBib3JkZXItcmFkaXVzOiA1cHg7XCIpO1xuLy8gICAgICAgICAgICAgfSk7XG4vLyAgICAgICAgICAgICBwcm9qZWN0LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCAoKSA9PiB7XG4vLyAgICAgICAgICAgICAgICAgcHJvamVjdC5zdHlsZS5iYWNrZ3JvdW5kID0gXCJub25lXCI7XG4vLyAgICAgICAgICAgICB9KTtcbi8vICAgICAgICAgfSlcbi8vICAgICAgICAgcmV0dXJuIGNvbXBsZXRlZExpc3QuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKTtcbi8vICAgICB9ZWxzZSByZXR1cm4gY29tcGxldGVkTGlzdC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xuLy8gfVxuXG4vLyBmdW5jdGlvbiBjaGFuZ2VBcnJvdyhhcnJvd0RpcmVjdGlvbikge1xuLy8gICAgIGNvbnN0IGFycm93SWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29tcGxldGVkLXRhYiAubWF0ZXJpYWwtaWNvbnMtb3V0bGluZWRcIik7XG4vLyAgICAgaWYoYXJyb3dEaXJlY3Rpb24gPT09IFwiQ29tcGxldGVkXFxuZXhwYW5kX21vcmVcIiB8fCBhcnJvd0RpcmVjdGlvbiA9PT0gXCJleHBhbmRfbW9yZVwiKSByZXR1cm4gYXJyb3dJY29uLmlubmVyVGV4dCA9IFwiZXhwYW5kX2xlc3NcIlxuLy8gICAgIGVsc2UgcmV0dXJuIGFycm93SWNvbi5pbm5lclRleHQgPSBcImV4cGFuZF9tb3JlXCI7XG4vLyB9XG5cbi8vIGZ1bmN0aW9uIGFkZFRvUHJvamVjdExpc3QoYXJyKSB7XG4vLyAgICAgY29uc3QgY29tcGxldGVkTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1saXN0XCIpO1xuLy8gICAgIGNvbXBsZXRlZExpc3QudGV4dENvbnRlbnQgPSBcIlwiO1xuLy8gICAgIGFyci5mb3JFYWNoKChwcm9qZWN0KSA9PiB7XG4vLyAgICAgICAgIGNvbnN0IG5ld1Byb2plY3RDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuLy8gICAgICAgICBuZXdQcm9qZWN0Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJuZXctcHJvamVjdC1jb25cIik7XG4vLyAgICAgICAgIGNvbnN0IHByb2plY3RUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuLy8gICAgICAgICBwcm9qZWN0VGl0bGUuY2xhc3NMaXN0LmFkZChcInByb2plY3QtdGl0bGVcIik7XG4vLyAgICAgICAgIHByb2plY3RUaXRsZS50ZXh0Q29udGVudCA9IHByb2plY3QudGl0bGU7XG4vLyAgICAgICAgIG5ld1Byb2plY3RDb250YWluZXIuYXBwZW5kQ2hpbGQocHJvamVjdFRpdGxlKTtcbi8vICAgICAgICAgbmV3UHJvamVjdENvbnRhaW5lci5hcHBlbmRDaGlsZChjcmVhdGVQcm9qZWN0QnV0dG9ucygpKTtcbi8vICAgICAgICAgY29tcGxldGVkTGlzdC5hcHBlbmRDaGlsZChuZXdQcm9qZWN0Q29udGFpbmVyKTtcbi8vICAgICB9KVxuLy8gICAgIHJldHVybiBjb21wbGV0ZWRMaXN0O1xuLy8gfVxuXG4vLyBmdW5jdGlvbiBkaXNwbGF5VGFzayhhcnIpIHtcbi8vICAgICBjb25zdCB0YXNrTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC10YXNrLWxpc3RcIik7XG4vLyAgICAgY2xlYXJUYXNrTGlzdCgpO1xuLy8gICAgIGFyci5mb3JFYWNoKHRhc2sgPT4ge1xuLy8gICAgICAgICBjb25zdCBwcm9qZWN0VGFzayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4vLyAgICAgICAgIHByb2plY3RUYXNrLmNsYXNzTGlzdC5hZGQoJ3Byb2plY3QtdGFzaycpO1xuLy8gICAgICAgICBjb25zdCBwcm9qZWN0VGFza0xlZnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuLy8gICAgICAgICBwcm9qZWN0VGFza0xlZnQuY2xhc3NMaXN0LmFkZChcInByb2plY3QtdGFzay1sZWZ0XCIpO1xuLy8gICAgICAgICBjb25zdCBjaGVja0JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4vLyAgICAgICAgIGNoZWNrQm94LmNsYXNzTGlzdC5hZGQoJ2NoZWNrYm94Jyk7XG4vLyAgICAgICAgIGNvbnN0IHRhc2tEZXNjcmlwdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuLy8gICAgICAgICB0YXNrRGVzY3JpcHRpb24uY2xhc3NMaXN0LmFkZChcInByb2plY3QtdGFzay1kZXNjXCIpO1xuLy8gICAgICAgICB0YXNrRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSB0YXNrO1xuLy8gICAgICAgICBwcm9qZWN0VGFza0xlZnQuYXBwZW5kQ2hpbGQoY2hlY2tCb3gpO1xuLy8gICAgICAgICBwcm9qZWN0VGFza0xlZnQuYXBwZW5kQ2hpbGQodGFza0Rlc2NyaXB0aW9uKTtcbi8vICAgICAgICAgcHJvamVjdFRhc2suYXBwZW5kQ2hpbGQocHJvamVjdFRhc2tMZWZ0KTtcbi8vICAgICAgICAgcHJvamVjdFRhc2suYXBwZW5kQ2hpbGQoY3JlYXRlUHJvamVjdEJ1dHRvbnMoKSk7XG4vLyAgICAgICAgIGNvbnN0IGFkZFRhc2tCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC10YXNrXCIpO1xuLy8gICAgICAgICByZXR1cm4gdGFza0xpc3QuaW5zZXJ0QmVmb3JlKHByb2plY3RUYXNrLCBhZGRUYXNrQnRuKTtcbi8vICAgICB9KTtcbi8vIH1cblxuLy8gZnVuY3Rpb24gZGlzcGxheVByb2plY3QocHJvamVjdE9iaikge1xuLy8gICAgIGNsZWFyVGFza0xpc3QoKTtcbi8vICAgICBjb25zdCBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW4taGRcIik7XG4vLyAgICAgaGVhZGVyLnRleHRDb250ZW50ID0gcHJvamVjdE9iai50aXRsZTtcbi8vICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbi1oZC1kZXNjXCIpO1xuLy8gICAgIGRlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gcHJvamVjdE9iai5kZXNjcmlwdGlvbjtcbi8vICAgICBjb25zdCBkYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluLWhkLWRhdGUtdXNlclwiKTtcbi8vICAgICBkYXRlLnRleHRDb250ZW50ID0gcHJvamVjdE9iai5kdWVEYXRlO1xuLy8gICAgIGNvbnN0IHByaW9yaXR5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluLWhkLXByaW9yaXR5LXVzZXJcIik7XG4vLyAgICAgcHJpb3JpdHkudGV4dENvbnRlbnQgPSBwcm9qZWN0T2JqLnByaW9yaXR5O1xuLy8gICAgIHByaW9yaXR5LnN0eWxlLmNvbG9yID0gY2hhbmdlUHJpb3JpdHlDb2xvcihwcm9qZWN0T2JqLnByaW9yaXR5KTtcblxuLy8gICAgIC8vaXRlcmF0ZSB0aHJvdWdoIHByb2plY3QgdGl0bGUgZWxlbWVudCB0aGF0IGNvbnRhaW5zIHByb2plY3QgdGl0bGVcbi8vICAgICBmb3IgKGNvbnN0IGEgb2YgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wcm9qZWN0LXRpdGxlXCIpKSB7XG4vLyAgICAgICAgIGlmKGEudGV4dENvbnRlbnQuaW5jbHVkZXMocHJvamVjdE9iai50aXRsZSkpIHtcbi8vICAgICAgICAgICAgIGEuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJjb2xvcjogd2hpdGU7IG9wYWNpdHk6IDE7XCIpO1xuLy8gICAgICAgICAgICAgYS5wYXJlbnRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmdiYSgyNTUsIDI1NSwgMjU1LCAwLjI5NilcIjtcbi8vICAgICAgICAgfWVsc2Uge1xuLy8gICAgICAgICAgICAgYS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImNvbG9yOiAjRUJFQkVCOyBvcGFjaXR5OiAuNTtcIik7XG4vLyAgICAgICAgICAgICBhLnBhcmVudEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZCA9IFwibm9uZVwiO1xuLy8gICAgICAgICB9XG4vLyAgICAgfVxuLy8gfVxuXG4vLyBmdW5jdGlvbiByZW1vdmVQcm9qZWN0KCkge1xuLy8gICAgIGlmKHByb2plY3RBcnIubGVuZ3RoID09PSAwKSB7XG4vLyAgICAgICAgIGNvbnN0IGhlYWRlckNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbi1oZC1jb25cIik7XG4vLyAgICAgICAgIGhlYWRlckNvbnRhaW5lci50ZXh0Q29udGVudCA9IFwiXCI7XG4vLyAgICAgICAgIGhlYWRlckNvbnRhaW5lci5zdHlsZS5wYWRkaW5nQm90dG9tID0gXCI2LjE1cmVtXCI7XG4vLyAgICAgICAgIHJldHVybiBoZWFkZXJDb250YWluZXI7XG4vLyAgICAgfWVsc2Uge1xuLy8gICAgICAgICBjb25zdCBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW4taGRcIik7XG4vLyAgICAgICAgIGhlYWRlci50ZXh0Q29udGVudCA9IHByb2plY3RBcnJbMF0udGl0bGU7XG4vLyAgICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluLWhkLWRlc2NcIik7XG4vLyAgICAgICAgIGRlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gcHJvamVjdEFyclswXS5kZXNjcmlwdGlvbjtcbi8vICAgICAgICAgY29uc3QgZGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbi1oZC1kYXRlLXVzZXJcIik7XG4vLyAgICAgICAgIGRhdGUudGV4dENvbnRlbnQgPSBwcm9qZWN0QXJyWzBdLmR1ZURhdGU7XG4vLyAgICAgICAgIGNvbnN0IHByaW9yaXR5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluLWhkLXByaW9yaXR5LXVzZXJcIik7XG4vLyAgICAgICAgIHByaW9yaXR5LnRleHRDb250ZW50ID0gcHJvamVjdEFyclswXS5wcmlvcml0eTtcbi8vICAgICAgICAgcHJpb3JpdHkuc3R5bGUuY29sb3IgPSBjaGFuZ2VQcmlvcml0eUNvbG9yKHByb2plY3RBcnJbMF0ucHJpb3JpdHkpO1xuLy8gICAgICAgICBjb25zdCBzZWxlY3RlZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC10aXRsZVwiKTtcbi8vICAgICAgICAgc2VsZWN0ZWQuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJjb2xvcjogd2hpdGU7IG9wYWNpdHk6IDE7XCIpO1xuLy8gICAgICAgICBzZWxlY3RlZC5wYXJlbnRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmdiYSgyNTUsIDI1NSwgMjU1LCAwLjI5NilcIjtcbi8vICAgICB9XG4vLyB9XG5cbi8vIGZ1bmN0aW9uIGNoYW5nZVByaW9yaXR5Q29sb3IocHJpb3JpdHkpIHtcbi8vICAgICBpZihwcmlvcml0eSA9PT0gXCJMb3dcIikgcmV0dXJuIFwiZ3JlZW5cIjtcbi8vICAgICBlbHNlIGlmKHByaW9yaXR5ID09PSBcIk1lZGl1bVwiKSByZXR1cm4gXCJ5ZWxsb3dcIjtcbi8vICAgICBlbHNlIHJldHVybiBcInJlZFwiO1xuLy8gfVxuXG4vLyBmdW5jdGlvbiBjcmVhdGVQcm9qZWN0QnV0dG9ucygpIHtcbi8vICAgICBjb25zdCBwcm9qZWN0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbi8vICAgICBwcm9qZWN0QnRuLmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0LWJ0blwiKTtcbi8vICAgICBjb25zdCBlZGl0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4vLyAgICAgY29uc3QgZGVsZXRlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4vLyAgICAgZWRpdEJ0bi5jbGFzc0xpc3QuYWRkKFwibWF0ZXJpYWwtaWNvbnMtb3V0bGluZWRcIik7XG4vLyAgICAgZWRpdEJ0bi5jbGFzc0xpc3QuYWRkKFwiZWRpdFwiKTtcbi8vICAgICBkZWxldGVCdG4uY2xhc3NMaXN0LmFkZChcIm1hdGVyaWFsLWljb25zLW91dGxpbmVkXCIpO1xuLy8gICAgIGRlbGV0ZUJ0bi5jbGFzc0xpc3QuYWRkKFwiZGVsZXRlXCIpO1xuLy8gICAgIGVkaXRCdG4udGV4dENvbnRlbnQgPSBcImVkaXRcIjtcbi8vICAgICBkZWxldGVCdG4udGV4dENvbnRlbnQgPSBcImRlbGV0ZVwiO1xuLy8gICAgIHByb2plY3RCdG4uYXBwZW5kQ2hpbGQoZWRpdEJ0bik7XG4vLyAgICAgcHJvamVjdEJ0bi5hcHBlbmRDaGlsZChkZWxldGVCdG4pO1xuLy8gICAgIHJldHVybiBwcm9qZWN0QnRuO1xuLy8gfVxuXG4vLyBmdW5jdGlvbiBjbGVhclRhc2tMaXN0KCkge1xuLy8gICAgIGNvbnN0IHRhc2tMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LXRhc2stbGlzdFwiKTtcbi8vICAgICBjb25zdCBwcm9qZWN0VGFzayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucHJvamVjdC10YXNrXCIpO1xuLy8gICAgIGZvcihsZXQgaSA9IDA7IGkgPCBwcm9qZWN0VGFzay5sZW5ndGg7IGkrKykge1xuLy8gICAgICAgICB0YXNrTGlzdC5yZW1vdmVDaGlsZChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtdGFza1wiKSk7XG4vLyAgICAgfVxuLy8gICAgIHJldHVybiB0YXNrTGlzdDtcbi8vIH1cblxuLy8gZXhwb3J0IHtkaXNwbGF5Q29tcGxldGVkTGlzdCwgY2hhbmdlQXJyb3csIGFkZFRvUHJvamVjdExpc3QsIGRpc3BsYXlQcm9qZWN0LCBkaXNwbGF5VGFzaywgcmVtb3ZlUHJvamVjdH07XG5cblxuaW1wb3J0IHsgcHJvamVjdEZvcm0sIGVkaXRQcm9qZWN0Rm9ybX0gZnJvbSBcIi4vcHJvamVjdFwiO1xuaW1wb3J0IHsgdGFza0Zvcm0gfSBmcm9tIFwiLi90YXNrXCI7XG5cblxuZnVuY3Rpb24gZGlzcGxheVByb2plY3RNb2RhbCgpIHtcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LWZvcm1cIik7XG4gICAgY29uc3QgcHJvamVjdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LW1vZGFsXCIpO1xuICAgIHByb2plY3RNb2RhbC5zaG93TW9kYWwoKTtcbiAgICBwcm9qZWN0Rm9ybSgpO1xuXG4gICAgY29uc3QgY2xvc2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtY2xvc2VcIik7XG4gICAgY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgcHJvamVjdE1vZGFsLmNsb3NlKCk7XG4gICAgICAgIEhUTUxGb3JtRWxlbWVudC5wcm90b3R5cGUucmVzZXQuY2FsbChmb3JtKVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBkaXNwbGF5RWRpdFByb2plY3RNb2RhbChwcm9qZWN0VGl0bGUpIHtcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LWZvcm1cIik7XG4gICAgY29uc3QgcHJvamVjdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LW1vZGFsXCIpO1xuICAgIHByb2plY3RNb2RhbC5zaG93TW9kYWwoKTtcbiAgICBlZGl0UHJvamVjdEZvcm0ocHJvamVjdFRpdGxlKTtcblxuICAgIGNvbnN0IGNsb3NlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LWNsb3NlXCIpO1xuICAgIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHByb2plY3RNb2RhbC5jbG9zZSgpO1xuICAgICAgICBIVE1MRm9ybUVsZW1lbnQucHJvdG90eXBlLnJlc2V0LmNhbGwoZm9ybSlcbiAgICB9KTtcbn1cblxuLyogZGlzcGxheWluZyBwcm9qZWN0IGxpc3Qgb24gbGVmdCBzaWRlIG9mIHNjcmVlbiAqL1xuZnVuY3Rpb24gZGlzcGxheVByb2plY3QoYXJyKSB7XG4gICAgY29uc3QgaGVhZGVyQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluLWhkLWNvblwiKTtcbiAgICBoZWFkZXJDb250YWluZXIuc3R5bGUucGFkZGluZ0JvdHRvbSA9IFwiMXJlbVwiO1xuICAgIGNvbnN0IHByb2plY3RMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LWxpc3RcIik7XG4gICAgcHJvamVjdExpc3QudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIGZvcihsZXQgcHJvamVjdCA9IDA7IHByb2plY3QgPCBhcnIubGVuZ3RoOyBwcm9qZWN0KyspIHtcbiAgICAgICAgcHJvamVjdExpc3QuYXBwZW5kQ2hpbGQoY3JlYXRlUHJvamVjdEVsKGFycltwcm9qZWN0XSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlUHJvamVjdEVsKGFycikge1xuICAgIGNvbnN0IHByb2plY3RDb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHByb2plY3RDb24uY2xhc3NMaXN0LmFkZChcIm5ldy1wcm9qZWN0LWNvblwiKTtcblxuICAgIGNvbnN0IHByb2plY3RUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgIHByb2plY3RUaXRsZS5jbGFzc0xpc3QuYWRkKFwicHJvamVjdC10aXRsZVwiKTtcbiAgICBwcm9qZWN0VGl0bGUudGV4dENvbnRlbnQgPSBhcnIudGl0bGU7XG4gICAgcHJvamVjdENvbi5hcHBlbmRDaGlsZChwcm9qZWN0VGl0bGUpO1xuICAgIHByb2plY3RDb24uYXBwZW5kQ2hpbGQoY3JlYXRlQnV0dG9ucygpKTtcbiAgICByZXR1cm4gcHJvamVjdENvbjtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQnV0dG9ucygpIHtcbiAgICBjb25zdCBwcm9qZWN0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBwcm9qZWN0QnRuLmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0LWJ0blwiKTtcblxuICAgIGNvbnN0IGVkaXRCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICBlZGl0QnRuLmNsYXNzTGlzdC5hZGQoXCJtYXRlcmlhbC1pY29ucy1vdXRsaW5lZFwiKTtcbiAgICBlZGl0QnRuLmNsYXNzTGlzdC5hZGQoXCJlZGl0XCIpO1xuICAgIGVkaXRCdG4udGV4dENvbnRlbnQgPSBcImVkaXRcIjtcbiAgICBwcm9qZWN0QnRuLmFwcGVuZENoaWxkKGVkaXRCdG4pO1xuXG4gICAgY29uc3QgZGVsZXRlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgZGVsZXRlQnRuLmNsYXNzTGlzdC5hZGQoXCJtYXRlcmlhbC1pY29ucy1vdXRsaW5lZFwiKTtcbiAgICBkZWxldGVCdG4uY2xhc3NMaXN0LmFkZChcImRlbGV0ZVwiKTtcbiAgICBkZWxldGVCdG4udGV4dENvbnRlbnQgPSBcImRlbGV0ZVwiO1xuICAgIHByb2plY3RCdG4uYXBwZW5kQ2hpbGQoZGVsZXRlQnRuKTtcbiAgICByZXR1cm4gcHJvamVjdEJ0bjtcbn1cblxuZnVuY3Rpb24gZGlzcGxheVRhc2tNb2RhbCgpIHtcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrLWZvcm1cIik7XG4gICAgY29uc3QgdGFza01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrLW1vZGFsXCIpO1xuICAgIHRhc2tNb2RhbC5zaG93TW9kYWwoKTtcbiAgICB0YXNrRm9ybSgpO1xuXG4gICAgY29uc3QgY2xvc2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2stY2xvc2VcIik7XG4gICAgY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGFza01vZGFsLmNsb3NlKCk7XG4gICAgICAgIEhUTUxGb3JtRWxlbWVudC5wcm90b3R5cGUucmVzZXQuY2FsbChmb3JtKVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBkaXNwbGF5VGFzayhhcnIpIHtcbiAgICBjb25zdCB0YXNrTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC10YXNrLWxpc3RcIik7XG4gICAgaWYodHlwZW9mIGFyciA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICB0YXNrTGlzdC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgfWVsc2Uge1xuICAgICAgICB0YXNrTGlzdC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGFycltpXSk7XG4gICAgICAgICAgICB0YXNrTGlzdC5hcHBlbmRDaGlsZChjcmVhdGVUYXNrRWwoYXJyW2ldKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdGFza0xpc3QuYXBwZW5kQ2hpbGQoY3JlYXRlQWRkVGFza0J0bigpKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlVGFza0VsKGRlc2MpIHtcbiAgICBjb25zdCBwcm9qZWN0VGFzayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgcHJvamVjdFRhc2suY2xhc3NMaXN0LmFkZChcInByb2plY3QtdGFza1wiKTtcblxuICAgIGNvbnN0IHRhc2tMZWZ0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB0YXNrTGVmdC5jbGFzc0xpc3QuYWRkKFwicHJvamVjdC10YXNrLWxlZnRcIik7XG4gICAgcHJvamVjdFRhc2suYXBwZW5kQ2hpbGQodGFza0xlZnQpO1xuXG4gICAgY29uc3QgY2hlY2tib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGNoZWNrYm94LmNsYXNzTGlzdC5hZGQoXCJjaGVja2JveFwiKTtcbiAgICB0YXNrTGVmdC5hcHBlbmRDaGlsZChjaGVja2JveCk7XG5cbiAgICBjb25zdCB0YXNrRGVzYyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgIHRhc2tEZXNjLmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0LXRhc2stZGVzY1wiKTtcbiAgICB0YXNrRGVzYy50ZXh0Q29udGVudCA9IGRlc2M7XG4gICAgdGFza0xlZnQuYXBwZW5kQ2hpbGQodGFza0Rlc2MpO1xuXG4gICAgcHJvamVjdFRhc2suYXBwZW5kQ2hpbGQoY3JlYXRlVGFza0J1dHRvbnMoKSk7XG5cbiAgICByZXR1cm4gcHJvamVjdFRhc2s7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVRhc2tCdXR0b25zKCkge1xuICAgIGNvbnN0IHByb2plY3RCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHByb2plY3RCdG4uY2xhc3NMaXN0LmFkZChcInByb2plY3QtdGFzay1idG5cIik7XG5cbiAgICBjb25zdCBlZGl0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgZWRpdEJ0bi5jbGFzc0xpc3QuYWRkKFwibWF0ZXJpYWwtaWNvbnMtb3V0bGluZWRcIik7XG4gICAgZWRpdEJ0bi5jbGFzc0xpc3QuYWRkKFwiZWRpdFwiKTtcbiAgICBlZGl0QnRuLnRleHRDb250ZW50ID0gXCJlZGl0XCI7XG4gICAgcHJvamVjdEJ0bi5hcHBlbmRDaGlsZChlZGl0QnRuKTtcblxuICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgIGRlbGV0ZUJ0bi5jbGFzc0xpc3QuYWRkKFwibWF0ZXJpYWwtaWNvbnMtb3V0bGluZWRcIik7XG4gICAgZGVsZXRlQnRuLmNsYXNzTGlzdC5hZGQoXCJkZWxldGVcIik7XG4gICAgZGVsZXRlQnRuLnRleHRDb250ZW50ID0gXCJkZWxldGVcIjtcbiAgICBwcm9qZWN0QnRuLmFwcGVuZENoaWxkKGRlbGV0ZUJ0bik7XG4gICAgcmV0dXJuIHByb2plY3RCdG47XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUFkZFRhc2tCdG4oKSB7XG4gICAgY29uc3QgYWRkVGFza0J0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgYWRkVGFza0J0bi5jbGFzc0xpc3QuYWRkKFwiYWRkLXRhc2tcIik7XG5cbiAgICBjb25zdCBhZGRJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgYWRkSWNvbi5jbGFzc0xpc3QuYWRkKFwibWF0ZXJpYWwtaWNvbnMtb3V0bGluZWRcIik7XG4gICAgYWRkSWNvbi5jbGFzc0xpc3QuYWRkKFwiYWRkLWljb25cIik7XG4gICAgYWRkSWNvbi50ZXh0Q29udGVudCA9IFwiYWRkXCI7XG4gICAgYWRkVGFza0J0bi5wcmVwZW5kKGFkZEljb24sIFwiQWRkIFRhc2tcIik7XG4gICAgcmV0dXJuIGFkZFRhc2tCdG47XG59XG5cbmZ1bmN0aW9uIGRpc3BsYXlNYWluKHByb2plY3QpIHtcbiAgICBjb25zdCBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW4taGRcIik7XG4gICAgaGVhZGVyLnRleHRDb250ZW50ID0gcHJvamVjdC50aXRsZTtcblxuICAgIGNvbnN0IGRlc2MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW4taGQtZGVzY1wiKTtcbiAgICBkZXNjLnRleHRDb250ZW50ID0gcHJvamVjdC5kZXNjO1xuXG4gICAgY29uc3QgZHVlRGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbi1oZC1kYXRlLXVzZXJcIik7XG4gICAgZHVlRGF0ZS50ZXh0Q29udGVudCA9IHByb2plY3QuZHVlRGF0ZTtcblxuICAgIGNvbnN0IHByaW9yaXR5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluLWhkLXByaW9yaXR5LXVzZXJcIik7XG4gICAgcHJpb3JpdHkudGV4dENvbnRlbnQgPSBwcm9qZWN0LnByaW9yaXR5O1xuICAgIHByaW9yaXR5LnN0eWxlLmNvbG9yID0gcHJpb3JpdHlDb2xvcihwcm9qZWN0LnByaW9yaXR5KTtcblxuICAgIGNvbnN0IHRhc2tMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LXRhc2stbGlzdFwiKTtcbiAgICB0YXNrTGlzdC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgdGFza0xpc3QuYXBwZW5kQ2hpbGQoY3JlYXRlQWRkVGFza0J0bigpKTtcbn1cblxuZnVuY3Rpb24gZGlzcGxheURlbGV0ZU1haW4oYXJyKSB7XG4gICAgY29uc3QgaGVhZGVyQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluLWhkLWNvblwiKTtcblxuICAgIGNvbnN0IGhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbi1oZFwiKTtcblxuICAgIGNvbnN0IGRlc2MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW4taGQtZGVzY1wiKTtcblxuICAgIGNvbnN0IGR1ZURhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW4taGQtZGF0ZS11c2VyXCIpO1xuXG4gICAgY29uc3QgcHJpb3JpdHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW4taGQtcHJpb3JpdHktdXNlclwiKTtcblxuICAgIGlmKGFyci5sZW5ndGggPT09IDApIHtcbiAgICAgICAgaGVhZGVyLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICAgICAgZGVzYy50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgICAgIGR1ZURhdGUudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgICAgICBwcmlvcml0eS50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgICAgIGhlYWRlckNvbnRhaW5lci5zdHlsZS5wYWRkaW5nQm90dG9tID0gXCI0LjlyZW1cIjtcbiAgICB9ZWxzZSB7XG4gICAgICAgIGhlYWRlci50ZXh0Q29udGVudCA9IGFyclswXS50aXRsZTtcbiAgICAgICAgZGVzYy50ZXh0Q29udGVudCA9IGFyclswXS5kZXNjO1xuICAgICAgICBkdWVEYXRlLnRleHRDb250ZW50ID0gYXJyWzBdLmR1ZURhdGU7XG4gICAgICAgIHByaW9yaXR5LnRleHRDb250ZW50ID0gYXJyWzBdLnByaW9yaXR5O1xuICAgIH1cblxufVxuXG5mdW5jdGlvbiBwcmlvcml0eUNvbG9yKGxldmVsKSB7XG4gICAgaWYobGV2ZWwgPT09IFwiTG93XCIpIHJldHVybiBcImdyZWVuXCI7XG4gICAgZWxzZSBpZihsZXZlbCA9PT0gXCJNZWRpdW1cIikgcmV0dXJuIFwieWVsbG93XCI7XG4gICAgZWxzZSByZXR1cm4gXCJyZWRcIjtcbn1cblxuZXhwb3J0IHtkaXNwbGF5UHJvamVjdCwgZGlzcGxheVByb2plY3RNb2RhbCwgZGlzcGxheUVkaXRQcm9qZWN0TW9kYWwsIGRpc3BsYXlNYWluLCBkaXNwbGF5RGVsZXRlTWFpbiwgZGlzcGxheVRhc2tNb2RhbCwgZGlzcGxheVRhc2t9OyIsIi8vIGltcG9ydCB7IHByb2plY3RNb2RhbCwgcHJvamVjdEZvcm0sIHByb2plY3RBcnIsIGVkaXRNb2RhbCwgZWRpdEZvcm0sIGRlbGV0ZVByb2plY3R9IGZyb20gXCIuL3Byb2plY3RcIjtcbi8vIGltcG9ydCB7IHRhc2tNb2RhbCwgdGFza0Zvcm0sIHRhc2tBcnIsIHVwZGF0ZVRhc2ssIGVkaXRUYXNrTW9kYWwsIGVkaXRUYXNrRm9ybSwgZGVsZXRlVGFzaywgc3RyaWtlVGhyb3VnaCB9IGZyb20gXCIuL3Rhc2tcIjtcbi8vIGltcG9ydCB7IGRpc3BsYXlDb21wbGV0ZWRMaXN0LCBjaGFuZ2VBcnJvdywgZGlzcGxheVByb2plY3QsIGRpc3BsYXlUYXNrLCByZW1vdmVQcm9qZWN0fSBmcm9tIFwiLi9VSVwiO1xuXG4vLyBjb25zdCBhZGRQcm9qZWN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtcHJvamVjdFwiKTtcbi8vIGFkZFByb2plY3RCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbi8vICAgICBwcm9qZWN0TW9kYWwoKTtcbi8vIH0pO1xuXG4vLyBwcm9qZWN0Rm9ybSgpO1xuLy8gdGFza0Zvcm0oKTtcblxuLy8gY29uc3QgcHJvamVjdExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnByb2plY3QtbGlzdFwiKTtcbi8vIHByb2plY3RMaXN0LmZvckVhY2goKHByb2plY3QpID0+IHtcbi8vICAgICBwcm9qZWN0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuLy8gICAgICAgICAvLyBjb25zb2xlLmxvZyhwcm9qZWN0QXJyKTtcbi8vICAgICAgICAgbGV0IHByb2plY3RUaXRsZSA9IFwiXCI7XG4vLyAgICAgICAgIGlmKGUudGFyZ2V0LmNsYXNzTGlzdC52YWx1ZSA9PT0gXCJwcm9qZWN0LXRpdGxlXCIpIHtcbi8vICAgICAgICAgICAgIHByb2plY3RUaXRsZSA9IGUudGFyZ2V0LmNoaWxkTm9kZXNbMF0udGV4dENvbnRlbnQ7XG4vLyAgICAgICAgIH1lbHNlIGlmKGUudGFyZ2V0LmNsYXNzTGlzdC52YWx1ZSA9PT0gXCJuZXctcHJvamVjdC1jb25cIikge1xuLy8gICAgICAgICAgICAgcHJvamVjdFRpdGxlID0gZS50YXJnZXQuY2hpbGROb2Rlc1swXS50ZXh0Q29udGVudDtcbi8vICAgICAgICAgfWVsc2Uge1xuLy8gICAgICAgICAgICAgcHJvamVjdFRpdGxlID0gZS50YXJnZXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmNoaWxkTm9kZXNbMF0udGV4dENvbnRlbnQ7XG4vLyAgICAgICAgIH1cbi8vICAgICAgICAgY29uc3QgcHJvamVjdEluZGV4ID0gcHJvamVjdEFyci5maW5kSW5kZXgocHJvamVjdCA9PiBwcm9qZWN0LnRpdGxlID09PSBwcm9qZWN0VGl0bGUpO1xuLy8gICAgICAgICBkaXNwbGF5UHJvamVjdChwcm9qZWN0QXJyW3Byb2plY3RJbmRleF0pO1xuLy8gICAgICAgICBjb25zdCB0YXNrSW5kZXggPSB0YXNrQXJyLmZpbmRJbmRleCh0YXNrID0+IHRhc2sucHJvamVjdCA9PT0gcHJvamVjdFRpdGxlKTtcbi8vICAgICAgICAgaWYodGFza0luZGV4ICE9PSAtMSkgZGlzcGxheVRhc2sodGFza0Fyclt0YXNrSW5kZXhdLmRlc2NyaXB0aW9uKTtcbi8vICAgICB9KVxuLy8gfSlcblxuLy8gY29uc3QgcHJvamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucHJvamVjdC1saXN0XCIpO1xuLy8gcHJvamVjdEJ0bi5mb3JFYWNoKGJ0biA9PiB7XG4vLyAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuLy8gICAgICAgICBpZihlLnRhcmdldC5jbGFzc0xpc3QudmFsdWUgPT09IFwibWF0ZXJpYWwtaWNvbnMtb3V0bGluZWQgZWRpdFwiKSB7XG4vLyAgICAgICAgICAgICBjb25zdCB0aXRsZSA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5jaGlsZE5vZGVzWzBdLnRleHRDb250ZW50O1xuLy8gICAgICAgICAgICAgY29uc3QgcHJvamVjdEluZGV4ID0gcHJvamVjdEFyci5maW5kSW5kZXgocHJvamVjdCA9PiBwcm9qZWN0LnRpdGxlID09PSB0aXRsZSk7XG4vLyAgICAgICAgICAgICBjb25zdCB0YXNrSW5kZXggPSB0YXNrQXJyLmZpbmRJbmRleCh0YXNrID0+IHRhc2sucHJvamVjdCA9PT0gdGl0bGUpO1xuLy8gICAgICAgICAgICAgZWRpdE1vZGFsKCk7XG4vLyAgICAgICAgICAgICBlZGl0Rm9ybShwcm9qZWN0SW5kZXgpO1xuLy8gICAgICAgICAgICAgLy8gdXBkYXRlVGFzayh0YXNrSW5kZXgsIHRpdGxlKTtcbi8vICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiaW5kZXggbW9kdWxlXCIpO1xuLy8gICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocHJvamVjdEFycik7XG4vLyAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhwcm9qZWN0QXJyW3Byb2plY3RJbmRleF0pO1xuLy8gICAgICAgICB9XG4vLyAgICAgICAgIGlmKGUudGFyZ2V0LmNsYXNzTGlzdC52YWx1ZSA9PT0gXCJtYXRlcmlhbC1pY29ucy1vdXRsaW5lZCBkZWxldGVcIikge1xuLy8gICAgICAgICAgICAgY29uc3QgdGl0bGUgPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuY2hpbGROb2Rlc1swXS50ZXh0Q29udGVudDtcbi8vICAgICAgICAgICAgIGNvbnN0IHByb2plY3RJbmRleCA9IHByb2plY3RBcnIuZmluZEluZGV4KHByb2plY3QgPT4gcHJvamVjdC50aXRsZSA9PT0gdGl0bGUpO1xuLy8gICAgICAgICAgICAgZGVsZXRlUHJvamVjdChwcm9qZWN0SW5kZXgpO1xuLy8gICAgICAgICAgICAgY29uc3QgcHJvamVjdExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtbGlzdFwiKTtcbi8vICAgICAgICAgICAgIHByb2plY3RMaXN0LnJlbW92ZUNoaWxkKGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudCk7XG4vLyAgICAgICAgICAgICByZW1vdmVQcm9qZWN0KHByb2plY3RBcnIpO1xuLy8gICAgICAgICB9XG4vLyAgICAgfSlcbi8vIH0pXG5cbi8vIGNvbnN0IHRhc2tCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnByb2plY3QtdGFzay1saXN0XCIpO1xuLy8gdGFza0J0bi5mb3JFYWNoKHRhc2sgPT4ge1xuLy8gICAgIHRhc2suYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4vLyAgICAgICAgIGlmKGUudGFyZ2V0LmNsYXNzTGlzdC52YWx1ZSA9PT0gXCJtYXRlcmlhbC1pY29ucy1vdXRsaW5lZCBlZGl0XCIpIHtcbi8vICAgICAgICAgICAgIGNvbnN0IHRhc2tEZXNjID0gZS50YXJnZXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmNoaWxkTm9kZXNbMF0uY2hpbGROb2Rlc1sxXS50ZXh0Q29udGVudDtcbi8vICAgICAgICAgICAgIGNvbnN0IGhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbi1oZFwiKS50ZXh0Q29udGVudDtcbi8vICAgICAgICAgICAgIGNvbnN0IHRhc2tJbmRleCA9IHRhc2tBcnIuZmluZEluZGV4KHRhc2sgPT4gdGFzay5wcm9qZWN0ID09PSBoZWFkZXIpO1xuLy8gICAgICAgICAgICAgY29uc3QgZGVzY0luZGV4ID0gdGFza0Fyclt0YXNrSW5kZXhdLmRlc2NyaXB0aW9uLmZpbmRJbmRleChkZXNjID0+IGRlc2MgPT09IHRhc2tEZXNjKTtcbi8vICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRlc2NJbmRleCk7XG4vLyAgICAgICAgICAgICBlZGl0VGFza01vZGFsKCk7XG4vLyAgICAgICAgICAgICBlZGl0VGFza0Zvcm0odGFza0luZGV4LCBkZXNjSW5kZXgpO1xuLy8gICAgICAgICB9XG4vLyAgICAgICAgIGlmKGUudGFyZ2V0LmNsYXNzTGlzdC52YWx1ZSA9PT0gXCJtYXRlcmlhbC1pY29ucy1vdXRsaW5lZCBkZWxldGVcIikge1xuLy8gICAgICAgICAgICAgY29uc3QgdGFza0Rlc2MgPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzWzFdLnRleHRDb250ZW50O1xuLy8gICAgICAgICAgICAgY29uc3QgaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluLWhkXCIpLnRleHRDb250ZW50O1xuLy8gICAgICAgICAgICAgY29uc3QgdGFza0luZGV4ID0gdGFza0Fyci5maW5kSW5kZXgodGFzayA9PiB0YXNrLnByb2plY3QgPT09IGhlYWRlcik7XG4vLyAgICAgICAgICAgICBjb25zdCBkZXNjSW5kZXggPSB0YXNrQXJyW3Rhc2tJbmRleF0uZGVzY3JpcHRpb24uZmluZEluZGV4KGRlc2MgPT4gZGVzYyA9PT0gdGFza0Rlc2MpO1xuLy8gICAgICAgICAgICAgZGVsZXRlVGFzayh0YXNrSW5kZXgsIGRlc2NJbmRleCk7XG4vLyAgICAgICAgICAgICBjb25zdCBwcm9qZWN0VGFza0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtdGFzay1saXN0XCIpO1xuLy8gICAgICAgICAgICAgcHJvamVjdFRhc2tMaXN0LnJlbW92ZUNoaWxkKGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudCk7XG4vLyAgICAgICAgIH1cbi8vICAgICAgICAgaWYoZS50YXJnZXQuY2xhc3NMaXN0LnZhbHVlID09PSBcImNoZWNrYm94XCIgfHwgZS50YXJnZXQuY2xhc3NMaXN0LnZhbHVlID09PSBcImNoZWNrYm94IGFjdGl2ZVwiKSB7XG4vLyAgICAgICAgICAgICBjb25zdCBkZXNjID0gZS50YXJnZXQucGFyZW50RWxlbWVudC5jaGlsZE5vZGVzWzFdO1xuLy8gICAgICAgICAgICAgY29uc3QgY2hlY2tib3ggPSBlLnRhcmdldDtcbi8vICAgICAgICAgICAgIHN0cmlrZVRocm91Z2goY2hlY2tib3gsIGRlc2MpO1xuLy8gICAgICAgICB9XG4vLyAgICAgfSlcbi8vIH0pXG5cbi8vIGNvbnN0IGFkZFRhc2tidG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC10YXNrXCIpO1xuLy8gYWRkVGFza2J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuLy8gICAgIHRhc2tNb2RhbCgpO1xuLy8gfSk7XG5cbi8vIGNvbnN0IGNvbXBsZXRlZFRhYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29tcGxldGVkLXRhYlwiKTtcbi8vIGNvbXBsZXRlZFRhYi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbi8vICAgICBjb25zdCBpbm5lclRleHQgPSBlLnRhcmdldC5pbm5lclRleHQ7XG4vLyAgICAgaWYoaW5uZXJUZXh0ID09PSBcIkNvbXBsZXRlZFxcbmV4cGFuZF9tb3JlXCIgfHwgaW5uZXJUZXh0ID09PSBcImV4cGFuZF9tb3JlXCIpIHtcbi8vICAgICAgICAgY2hhbmdlQXJyb3coaW5uZXJUZXh0KTtcbi8vICAgICAgICAgZGlzcGxheUNvbXBsZXRlZExpc3QoaW5uZXJUZXh0KTtcbi8vICAgICB9ZWxzZSB7XG4vLyAgICAgICAgIGNoYW5nZUFycm93KGlubmVyVGV4dCk7XG4vLyAgICAgICAgIGRpc3BsYXlDb21wbGV0ZWRMaXN0KGlubmVyVGV4dCk7XG4vLyAgICAgfVxuLy8gfSk7XG5cbmltcG9ydCB7IGRpc3BsYXlQcm9qZWN0TW9kYWwsIGRpc3BsYXlFZGl0UHJvamVjdE1vZGFsLCBkaXNwbGF5VGFza01vZGFsfSBmcm9tIFwiLi9VSVwiO1xuaW1wb3J0IHsgZGVsZXRlUHJvamVjdCwgc2VsZWN0ZWRQcm9qZWN0IH0gZnJvbSBcIi4vcHJvamVjdFwiO1xuaW1wb3J0IHsgc2VsZWN0ZWRUYXNrLCBkZWxldGVUYXNrIH0gZnJvbSBcIi4vdGFza1wiO1xuXG5jb25zdCBhZGRQcm9qZWN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtcHJvamVjdFwiKTtcbmFkZFByb2plY3RCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBkaXNwbGF5UHJvamVjdE1vZGFsKCk7XG59KTtcblxuY29uc3QgZWRpdFByb2plY3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtbGlzdFwiKTtcbmVkaXRQcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIGlmKGUudGFyZ2V0LmNsYXNzTmFtZSA9PT0gXCJtYXRlcmlhbC1pY29ucy1vdXRsaW5lZCBlZGl0XCIpIHtcbiAgICAgICAgY29uc3QgcHJvamVjdFRpdGxlID0gZS50YXJnZXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmNoaWxkTm9kZXNbMF0udGV4dENvbnRlbnQ7XG4gICAgICAgIGRpc3BsYXlFZGl0UHJvamVjdE1vZGFsKHByb2plY3RUaXRsZSk7XG4gICAgfWVsc2UgaWYoZS50YXJnZXQuY2xhc3NOYW1lID09PSBcIm1hdGVyaWFsLWljb25zLW91dGxpbmVkIGRlbGV0ZVwiKSB7XG4gICAgICAgIGNvbnN0IHByb2plY3RUaXRsZSA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5jaGlsZE5vZGVzWzBdLnRleHRDb250ZW50O1xuICAgICAgICBkZWxldGVQcm9qZWN0KHByb2plY3RUaXRsZSk7XG4gICAgICAgIGRlbGV0ZVRhc2socHJvamVjdFRpdGxlKTtcbiAgICB9ZWxzZSB7XG4gICAgICAgIGlmKGUudGFyZ2V0LmNsYXNzTmFtZSA9PT0gXCJwcm9qZWN0LXRpdGxlXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb2plY3RUaXRsZSA9IGUudGFyZ2V0LmNsYXNzTmFtZTtcbiAgICAgICAgICAgIGNvbnN0IHByb2plY3RDb24gPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICBzZWxlY3RlZFByb2plY3QocHJvamVjdFRpdGxlKTtcbiAgICAgICAgICAgIHNlbGVjdGVkVGFzaygpO1xuICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0VGl0bGUgPSBlLnRhcmdldC5jaGlsZE5vZGVzWzBdLnRleHRDb250ZW50O1xuICAgICAgICAgICAgY29uc3QgcHJvamVjdENvbiA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICBzZWxlY3RlZFByb2plY3QocHJvamVjdFRpdGxlKTtcbiAgICAgICAgICAgIHNlbGVjdGVkVGFzaygpO1xuICAgICAgICB9XG4gICAgfVxufSk7XG5cbmNvbnN0IHRhc2tMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LXRhc2stbGlzdFwiKTtcbnRhc2tMaXN0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIGlmKGUudGFyZ2V0LmNsYXNzTmFtZSA9PT0gXCJhZGQtdGFza1wiKSB7XG4gICAgICAgIGRpc3BsYXlUYXNrTW9kYWwoKTtcbiAgICB9XG59KSJdLCJuYW1lcyI6WyJwcm9qZWN0QXJyIiwic2VsZWN0ZWRQcm9qZWN0IiwicHJvamVjdFRpdGxlIiwiaW5kZXgiLCJmaW5kUHJvamVjdCIsImRpc3BsYXlNYWluIiwiZmluZEluZGV4IiwicHJvamVjdCIsInRpdGxlIiwidGFza0FyciIsInNlbGVjdGVkVGFzayIsImRpc3BsYXlUYXNrIiwiZGVzYyIsImFyciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInRhc2siLCJ0ZXh0Q29udGVudCIsImRpc3BsYXlQcm9qZWN0Iiwic3R5bGUiLCJwYWRkaW5nQm90dG9tIiwicHJvamVjdExpc3QiLCJsZW5ndGgiLCJhcHBlbmRDaGlsZCIsImNyZWF0ZVByb2plY3RFbCIsInByb2plY3RDb24iLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwicHJvamVjdEJ0biIsImVkaXRCdG4iLCJkZWxldGVCdG4iLCJjcmVhdGVCdXR0b25zIiwidGFza0xpc3QiLCJpIiwiY29uc29sZSIsImxvZyIsImNyZWF0ZVRhc2tFbCIsImNyZWF0ZUFkZFRhc2tCdG4iLCJwcm9qZWN0VGFzayIsInRhc2tMZWZ0IiwiY2hlY2tib3giLCJ0YXNrRGVzYyIsImNyZWF0ZVRhc2tCdXR0b25zIiwiYWRkVGFza0J0biIsImFkZEljb24iLCJwcmVwZW5kIiwiZHVlRGF0ZSIsInByaW9yaXR5IiwibGV2ZWwiLCJjb2xvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJmb3JtIiwicHJvamVjdE1vZGFsIiwic2hvd01vZGFsIiwiZSIsInByZXZlbnREZWZhdWx0IiwiZ2V0RWxlbWVudEJ5SWQiLCJkZXNjcmlwdGlvbiIsImNoZWNrZWQiLCJuZXdQcm9qZWN0IiwidXNlclByb2plY3QiLCJ2YWx1ZSIsInB1c2giLCJjbG9zZSIsIkhUTUxGb3JtRWxlbWVudCIsInByb3RvdHlwZSIsInJlc2V0IiwiY2FsbCIsIm9uY2UiLCJwcm9qZWN0Rm9ybSIsImRpc3BsYXlQcm9qZWN0TW9kYWwiLCJ0YXJnZXQiLCJjbGFzc05hbWUiLCJlZGl0TW9kYWwiLCJlZGl0Rm9ybSIsImVkaXRQcm9qZWN0Rm9ybSIsImRpc3BsYXlFZGl0UHJvamVjdE1vZGFsIiwicGFyZW50RWxlbWVudCIsImNoaWxkTm9kZXMiLCJzcGxpY2UiLCJoZWFkZXJDb250YWluZXIiLCJoZWFkZXIiLCJkaXNwbGF5RGVsZXRlTWFpbiIsImRlbGV0ZVByb2plY3QiLCJkZWxldGVUYXNrIiwidGFza01vZGFsIiwidGFza1RpdGxlTWF0Y2giLCJuZXdUYXNrIiwidXNlclRhc2siLCJ0YXNrRm9ybSIsImRpc3BsYXlUYXNrTW9kYWwiXSwic291cmNlUm9vdCI6IiJ9